/*!
 * TableDnD v1.0.5 - 테이블 드래그 앤 드롭
 * https://github.com/isocra/TableDnD
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):(e=e||self,e.TableDnD=t(e.jQuery))}(this,function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);return function(e){e.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldX:0,oldY:0,build:function(t){return this.each(function(){this.tableDnDConfig=e.extend({onDragStyle:null,onDropStyle:null,onDragClass:"tDnD_whileDrag",onDrop:null,onDragStart:null,scrollAmount:5,sensitivity:10,dragHandle:null},t||{});var n=this;e(this).attr("dnd","true");var r=e(this).find("tbody tr");r.each(function(){var t=e(this);t.hasClass("nodrag")||t.mouseover(function(){n.tableDnDConfig.dragHandle?e(n.tableDnDConfig.dragHandle,this).css("cursor","move"):this.style.cursor="move"}).mouseout(function(){n.tableDnDConfig.dragHandle?e(n.tableDnDConfig.dragHandle,this).css("cursor",""):this.style.cursor=""})});this.onmousedown=function(t){return n.mouseover&&n.mousedown(t),!1},this.ondragstart=function(){return!1},this.onselectstart=function(){return!1}})},mousedown:function(t){var r=this.findDropTargetRow(t.target);if(null==r||e(r).hasClass("nodrag"))return!0;var o=e.tableDnD;return o.dragObject=r,o.currentTable=this,o.mouseOffset=o.getMouseOffset(r,t),o.oldX=t.clientX,o.oldY=t.clientY,e(document).bind("mousemove",o.mousemove).bind("mouseup",o.mouseup),this.tableDnDConfig.onDragStart&&this.tableDnDConfig.onDragStart(this,r),!1},mousemove:function(t){if(null==e.tableDnD.dragObject)return!0;var n=t.clientX-e.tableDnD.oldX,r=t.clientY-e.tableDnD.oldY;if(Math.abs(n)>=e.tableDnD.currentTable.tableDnDConfig.sensitivity||Math.abs(r)>=e.tableDnD.currentTable.tableDnDConfig.sensitivity){var o=e.tableDnD;o.currentTable.tableDnDConfig.onDragClass?e(o.dragObject).addClass(o.currentTable.tableDnDConfig.onDragClass):e(o.dragObject).css(o.currentTable.tableDnDConfig.onDragStyle);var i=t.clientY+o.mouseOffset.y;e(o.dragObject).css({position:"absolute",top:i+"px",left:t.clientX+o.mouseOffset.x+"px"});var a=o.findDropTargetRow(t.target);null!=a&&a!=o.dragObject&&o.currentTable.tableDnDConfig.onAllowDrop&&!o.currentTable.tableDnDConfig.onAllowDrop(o.dragObject,a)||(null!=a&&a!=o.dragObject?(e(a).before(o.dragObject),o.dragObject=a):o.moveToTop(t))}return!1},moveToTop:function(t){var n=e.tableDnD,r=n.currentTable,o=e(r).find("tbody tr").first();null!=o[0]&&o[0]!=n.dragObject&&t.clientY<=o.offset().top+r.tableDnDConfig.scrollAmount&&e(o).before(n.dragObject)},mouseup:function(t){if(null==e.tableDnD.currentTable||null==e.tableDnD.dragObject)return!0;e(document).unbind("mousemove",e.tableDnD.mousemove).unbind("mouseup",e.tableDnD.mouseup);var n=e.tableDnD.currentTable,r=e.tableDnD.dragObject;n.tableDnDConfig.onDragClass?e(r).removeClass(n.tableDnDConfig.onDragClass):e(r).css({position:"",top:"",left:""}),e.tableDnD.dragObject=null,n.tableDnDConfig.onDrop&&n.tableDnDConfig.onDrop(n,r),e.tableDnD.currentTable=null},getMouseOffset:function(e,t){var n=this.getPosition(e);return{x:n.x-t.pageX,y:n.y-t.pageY}},getPosition:function(e){var t=0,n=0;for(;e.offsetParent;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{x:t+=e.offsetLeft,y:n+=e.offsetTop}},findDropTargetRow:function(t){for(;null!=t&&"TR"!=t.tagName;)t=t.parentNode;return t}},e.fn.extend({tableDnD:e.tableDnD.build})}(n.default),n.default}); 