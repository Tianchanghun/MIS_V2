{% extends "base_login.html" %}

{% block title %}로그인 - {{ app_name }}{% endblock %}

{% block content %}
<div class="min-vh-100 d-flex align-items-center justify-content-center bg-light">
    <div class="row w-100">
        <div class="col-md-6 col-lg-4 mx-auto">
            <div class="card shadow">
                <div class="card-body p-5">
                    <!-- 로고 -->
                    <div class="text-center mb-4">
                        <img src="{{ url_for('static', filename='img/logo.png') }}" alt="{{ app_name }}" class="mb-3" style="max-height: 80px;">
                        <h3 class="text-primary">{{ app_name }}</h3>
                        <p class="text-muted">Management Information System</p>
                    </div>
                    
                    <!-- 로그인 폼 -->
                    <form method="POST" action="{{ url_for('auth.login') }}" id="loginForm">
                        <input type="hidden" name="back_url" value="{{ back_url }}">
                        
                        <div class="mb-3">
                            <label for="user_id" class="form-label">
                                <i class="bi bi-person"></i> 아이디
                            </label>
                            <input type="text" 
                                   class="form-control form-control-lg" 
                                   id="user_id" 
                                   name="user_id" 
                                   value="{{ user_id or remembered_id }}"
                                   placeholder="사용자 아이디를 입력하세요"
                                   required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="password" class="form-label">
                                <i class="bi bi-lock"></i> 비밀번호
                            </label>
                            <input type="password" 
                                   class="form-control form-control-lg" 
                                   id="password" 
                                   name="password" 
                                   placeholder="비밀번호를 입력하세요"
                                   required>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" 
                                   class="form-check-input" 
                                   id="remember_me" 
                                   name="remember_me">
                            <label class="form-check-label" for="remember_me">
                                아이디 기억하기
                            </label>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="bi bi-box-arrow-in-right"></i> 로그인
                            </button>
                        </div>
                    </form>
                    
                    <!-- 추가 정보 -->
                    <div class="text-center mt-4">
                        <small class="text-muted">
                            <i class="bi bi-info-circle"></i>
                            문의사항이 있으시면 시스템 관리자에게 연락해주세요.
                        </small>
                    </div>
                </div>
            </div>
            
            <!-- 시스템 정보 -->
            <div class="text-center mt-3">
                <small class="text-muted">
                    {{ app_name }} v{{ app_version }} &copy; {{ current_year }} 에이원
                </small>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.min-vh-100 {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.card {
    border: none;
    border-radius: 15px;
}

.form-control-lg {
    border-radius: 10px;
}

.btn-lg {
    border-radius: 10px;
    padding: 12px 0;
}

.form-control:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
}
</style>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // 폼 제출시 로딩 표시
    $('#loginForm').on('submit', function() {
        const btn = $(this).find('button[type="submit"]');
        btn.prop('disabled', true);
        btn.html('<i class="bi bi-hourglass-split"></i> 로그인 중...');
    });
    
    // 첫 번째 빈 필드에 포커스
    if ($('#user_id').val() === '') {
        $('#user_id').focus();
    } else {
        $('#password').focus();
    }
});
</script>
{% endblock %} 