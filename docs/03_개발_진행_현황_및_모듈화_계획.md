# 📋 **MIS v2 개발 진행 현황 및 모듈화 계획**

## 🎯 **현재 완료된 작업**

### ✅ **1. 환경 구축 완료** (100%)
- **Docker 환경**: PostgreSQL 15 (포트 5433), Redis 7 (포트 6380), pgAdmin 4 (포트 5051)
- **Python 환경**: 가상환경, 필요 패키지 설치 완료
- **환경 변수**: `.env` 파일 도커 환경에 맞게 설정 완료
- **네트워크**: 모든 컨테이너 간 연결 테스트 완료

### ✅ **2. 데이터베이스 스키마 구축 완료** (100%)
- **기본 테이블**: 13개 테이블 생성 완료 (tbl_category, tbl_member, tbl_department 등)
- **추가 테이블**: 17개 테이블 추가 생성 완료 (tbl_customer, tbl_shop, tbl_as 등)
- **총 30개 테이블**: 구현 메뉴에 필요한 모든 테이블 준비 완료
- **초기 데이터**: 부서, 관리자 계정, 카테고리 데이터 입력 완료

### ✅ **3. 프로젝트 설계 완료** (100%)
- **메뉴 구조**: 6개 대메뉴, 46개 세부 기능 정의 완료
- **기술 스택**: Flask 3.0 + PostgreSQL 15 + Redis 7 + Bootstrap 5.3
- **UI/UX 가이드라인**: Bootstrap Korean Dashboard 스타일 확정
- **Redis 캐시 전략**: 세션, 데이터, 임시, 큐 DB 분리 전략 수립

### ✅ **4. 개발 문서화 완료** (100%)
- **구현 메뉴 목록**: Phase 1-3 단계별 구현 계획
- **개발 스택 가이드라인**: 코딩 컨벤션, 프로젝트 구조, 보안 가이드
- **Redis 캐시 전략**: 캐시 분류, TTL 전략, 무효화 전략
- **환경 설정 가이드**: env_example.txt 완성

---

## 🚧 **진행 중/대기 중인 작업**

### ⚠️ **1. 레거시 데이터 마이그레이션** (대기 중)
- **상태**: MS-SQL 연결 네트워크 이슈로 대기
- **대안**: 수동 데이터 입력 또는 네트워크 해결 후 진행

### 🔄 **2. Flask 애플리케이션 개발** (준비 단계)
- **상태**: 기본 프레임워크 구조 생성 필요
- **우선순위**: 인증 시스템 → 관리자 메뉴 → 고객 관리

---

## 🏗️ **모듈화 개발 계획** (최대 500라인/파일 원칙)

### **Phase 1: 핵심 인프라 구축**

#### **1.1 인증 및 세션 모듈** 📝
```
app/auth/
├── __init__.py              # Blueprint 등록
├── routes.py               # 라우트 (로그인/로그아웃) - 150라인
├── forms.py                # WTF 폼 정의 - 100라인
├── services.py             # 인증 로직 - 200라인
└── decorators.py           # 권한 데코레이터 - 150라인
```

#### **1.2 관리자 모듈** 🔧
```
app/admin/
├── __init__.py              # Blueprint 등록
├── menu/
│   ├── routes.py           # 메뉴 관리 라우트 - 300라인
│   ├── services.py         # 메뉴 비즈니스 로직 - 250라인
│   └── forms.py            # 메뉴 폼 - 150라인
├── user/
│   ├── routes.py           # 사용자 관리 라우트 - 400라인
│   ├── services.py         # 사용자 비즈니스 로직 - 300라인
│   └── forms.py            # 사용자 폼 - 200라인
├── code/
│   ├── routes.py           # 코드 관리 라우트 - 250라인
│   ├── services.py         # 코드 비즈니스 로직 - 200라인
│   └── forms.py            # 코드 폼 - 100라인
└── department/
    ├── routes.py           # 부서 관리 라우트 - 200라인
    ├── services.py         # 부서 비즈니스 로직 - 150라인
    └── forms.py            # 부서 폼 - 100라인
```

#### **1.3 공통 모듈** ⚙️
```
app/common/
├── __init__.py              # 공통 모듈 초기화
├── models.py               # SQLAlchemy 모델 - 500라인 (분할 고려)
├── cache.py                # Redis 캐시 유틸리티 - 300라인
├── helpers.py              # 공통 헬퍼 함수 - 200라인
├── validators.py           # 공통 검증 함수 - 150라인
└── exceptions.py           # 커스텀 예외 - 100라인
```

### **Phase 2: 고객 및 영업 관리**

#### **2.1 고객 관리 모듈** 👥
```
app/customer/
├── __init__.py              # Blueprint 등록
├── customer/
│   ├── routes.py           # 고객 정보 관리 - 350라인
│   ├── services.py         # 고객 비즈니스 로직 - 300라인
│   └── forms.py            # 고객 폼 - 200라인
├── as_service/
│   ├── routes.py           # A/S 접수 관리 - 400라인
│   ├── services.py         # A/S 비즈니스 로직 - 350라인
│   └── forms.py            # A/S 폼 - 150라인
├── serial/
│   ├── routes.py           # 시리얼 검색/등록 - 300라인
│   ├── services.py         # 시리얼 비즈니스 로직 - 400라인
│   └── forms.py            # 시리얼 폼 - 100라인
└── targeting/
    ├── routes.py           # 고객 타겟팅 - 250라인
    ├── services.py         # 타겟팅 비즈니스 로직 - 300라인
    └── forms.py            # 타겟팅 폼 - 150라인
```

#### **2.2 영업 관리 모듈** 💼
```
app/sales/
├── __init__.py              # Blueprint 등록
├── shop/
│   ├── routes.py           # 매장 관리 - 400라인
│   ├── services.py         # 매장 비즈니스 로직 - 350라인
│   └── forms.py            # 매장 폼 - 200라인
├── product/
│   ├── routes.py           # 상품 관리 - 450라인
│   ├── services.py         # 상품 비즈니스 로직 - 400라인
│   └── forms.py            # 상품 폼 - 250라인
├── visit/
│   ├── routes.py           # 매장 방문 관리 - 300라인
│   ├── services.py         # 방문 비즈니스 로직 - 250라인
│   └── forms.py            # 방문 폼 - 150라인
└── sms/
    ├── routes.py           # SMS 발송 관리 - 250라인
    ├── services.py         # SMS 비즈니스 로직 - 300라인
    └── forms.py            # SMS 폼 - 100라인
```

### **Phase 3: 무역 및 물류 관리**

#### **3.1 무역 관리 모듈** 🚢
```
app/trade/
├── __init__.py              # Blueprint 등록
├── order/
│   ├── routes.py           # 발주 관리 - 500라인 (핵심 모듈)
│   ├── services.py         # 발주 비즈니스 로직 - 450라인
│   └── forms.py            # 발주 폼 - 300라인
├── makeshop/
│   ├── routes.py           # 생산처 관리 - 300라인
│   ├── services.py         # 생산처 비즈니스 로직 - 250라인
│   └── forms.py            # 생산처 폼 - 150라인
├── serial/
│   ├── routes.py           # 시리얼 생성 관리 - 400라인
│   ├── services.py         # 시리얼 생성 로직 - 500라인 (핵심)
│   └── forms.py            # 시리얼 폼 - 200라인
└── demurrage/
    ├── routes.py           # 체화료 관리 - 250라인
    ├── services.py         # 체화료 비즈니스 로직 - 200라인
    └── forms.py            # 체화료 폼 - 100라인
```

#### **3.2 물류 관리 모듈** 📦
```
app/logistics/
├── __init__.py              # Blueprint 등록
├── distribution/
│   ├── routes.py           # 입출고 관리 - 350라인
│   ├── services.py         # 입출고 비즈니스 로직 - 300라인
│   └── forms.py            # 입출고 폼 - 200라인
├── container/
│   ├── routes.py           # 컨테이너 관리 - 300라인
│   ├── services.py         # 컨테이너 비즈니스 로직 - 250라인
│   └── forms.py            # 컨테이너 폼 - 150라인
├── pallet/
│   ├── routes.py           # 파렛트 관리 - 200라인
│   ├── services.py         # 파렛트 비즈니스 로직 - 150라인
│   └── forms.py            # 파렛트 폼 - 100라인
└── scheduler/
    ├── routes.py           # 스케줄 관리 - 250라인
    ├── services.py         # 스케줄 비즈니스 로직 - 200라인
    └── forms.py            # 스케줄 폼 - 150라인
```

#### **3.3 통계 관리 모듈** 📊
```
app/stats/
├── __init__.py              # Blueprint 등록
├── sales/
│   ├── routes.py           # 판매 통계 - 400라인
│   ├── services.py         # 판매 통계 로직 - 450라인
│   └── forms.py            # 통계 폼 - 150라인
├── channel/
│   ├── routes.py           # 채널별 분석 - 300라인
│   ├── services.py         # 채널 분석 로직 - 350라인
│   └── forms.py            # 채널 폼 - 100라인
└── monitoring/
    ├── routes.py           # 일일 모니터링 - 250라인
    ├── services.py         # 모니터링 로직 - 200라인
    └── forms.py            # 모니터링 폼 - 100라인
```

---

## 🎨 **템플릿 모듈화 계획**

### **레이아웃 템플릿**
```
app/templates/
├── base.html               # 기본 레이아웃 - 200라인
├── partials/
│   ├── navbar.html         # 상단 네비게이션 - 100라인
│   ├── sidebar.html        # 사이드바 메뉴 - 150라인
│   ├── pagination.html     # 페이지네이션 - 50라인
│   ├── alerts.html         # 알림 메시지 - 30라인
│   └── breadcrumb.html     # 브레드크럼 - 30라인
└── macros/
    ├── forms.html          # 폼 매크로 - 200라인
    ├── tables.html         # 테이블 매크로 - 150라인
    └── buttons.html        # 버튼 매크로 - 100라인
```

### **기능별 템플릿**
```
app/templates/
├── auth/
│   ├── login.html          # 로그인 페이지 - 100라인
│   └── logout.html         # 로그아웃 페이지 - 50라인
├── admin/
│   ├── menu/               # 메뉴 관리 템플릿들
│   ├── user/               # 사용자 관리 템플릿들
│   └── code/               # 코드 관리 템플릿들
├── customer/
│   ├── customer/           # 고객 관리 템플릿들
│   ├── as_service/         # A/S 관리 템플릿들
│   └── serial/             # 시리얼 관리 템플릿들
└── [기타 모듈별 템플릿 디렉토리]
```

---

## 📱 **JavaScript 모듈화 계획**

```
app/static/js/
├── common/
│   ├── main.js             # 공통 함수 - 300라인
│   ├── ajax.js             # AJAX 유틸리티 - 200라인
│   ├── validation.js       # 폼 검증 - 250라인
│   └── datatable.js        # DataTable 설정 - 150라인
├── admin/
│   ├── menu.js             # 메뉴 관리 - 200라인
│   ├── user.js             # 사용자 관리 - 250라인
│   └── code.js             # 코드 관리 - 150라인
├── customer/
│   ├── customer.js         # 고객 관리 - 200라인
│   ├── as.js               # A/S 관리 - 250라인
│   └── serial.js           # 시리얼 관리 - 300라인
└── [기타 모듈별 JS 파일들]
```

---

## 🧪 **테스트 모듈화 계획**

```
tests/
├── unit/
│   ├── test_auth.py        # 인증 단위 테스트 - 200라인
│   ├── test_admin.py       # 관리자 단위 테스트 - 300라인
│   ├── test_customer.py    # 고객 단위 테스트 - 250라인
│   └── test_common.py      # 공통 단위 테스트 - 150라인
├── integration/
│   ├── test_api.py         # API 통합 테스트 - 400라인
│   ├── test_workflow.py    # 워크플로우 테스트 - 300라인
│   └── test_database.py    # DB 통합 테스트 - 200라인
└── fixtures/
    ├── sample_data.py      # 테스트 데이터 - 500라인
    └── conftest.py         # 테스트 설정 - 200라인
```

---

## 🔄 **개발 순서 및 우선순위**

### **1단계: 기본 인프라** (1-2주)
1. Flask 애플리케이션 기본 구조 생성
2. 인증 시스템 구현 (로그인/로그아웃)
3. 기본 레이아웃 및 공통 템플릿 작성
4. 권한 관리 시스템 구현

### **2단계: 관리자 시스템** (2-3주)
1. 메뉴 관리 (동적 메뉴 시스템)
2. 사용자 관리 (등록/수정/권한 설정)
3. 부서 관리
4. 코드 관리

### **3단계: 고객 관리 시스템** (2-3주)
1. 고객 정보 관리
2. A/S 접수 처리
3. 시리얼 검색/등록
4. 고객 타겟팅

### **4단계: 영업 관리 시스템** (3-4주)
1. 매장 관리
2. 상품 관리
3. 매장 방문 일지
4. SMS/EMAIL 발송

### **5단계: 무역 관리 시스템** (4-5주)
1. 생산처 관리
2. 발주 관리
3. **시리얼 번호 생성 시스템** (핵심)
4. 체화료 관리

### **6단계: 물류 및 통계** (3-4주)
1. 입출고 관리
2. 컨테이너/파렛트 관리
3. 스케줄 관리
4. 통계 및 보고서

---

## ⚠️ **개발 시 주의사항**

### **코드 품질 관리**
- **1파일 최대 500라인** 준수
- **함수 최대 50라인** 권장
- **클래스 최대 300라인** 권장
- **모듈 간 의존성 최소화**

### **성능 최적화**
- **Redis 캐시 적극 활용**
- **DB 쿼리 최적화**
- **페이지네이션 필수**
- **Ajax 비동기 처리**

### **보안 고려사항**
- **CSRF 토큰 필수**
- **SQL Injection 방지**
- **XSS 방지**
- **권한 체크 데코레이터 사용**

---

## ✅ **다음 단계 제안**

**우선순위 1: Flask 애플리케이션 기본 구조 생성**
1. Flask 앱 팩토리 패턴 구현
2. Blueprint 기본 구조 생성
3. 기본 라우트 및 템플릿 작성
4. 인증 시스템 구현

**준비되면 진행할 작업:**
- 레거시 데이터 마이그레이션 (네트워크 해결 시)
- 단위 테스트 작성
- 통합 테스트 환경 구축

**🚀 이제 Flask 애플리케이션 개발을 시작할 준비가 완료되었습니다!** 