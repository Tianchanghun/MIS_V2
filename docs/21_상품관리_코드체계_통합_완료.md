# ìƒí’ˆê´€ë¦¬ ì½”ë“œ ì²´ê³„ í†µí•© ì™„ë£Œ

## ğŸ“… ì‘ì—… ì¼ì: 2025-08-08

## ğŸ¯ **ì‘ì—… ëª©í‘œ**

ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ ìƒí’ˆê´€ë¦¬ì—ì„œ **ë¸Œëœë“œ, í’ˆëª©, íƒ€ì…, ë…„ë„**ë¥¼ ëª¨ë‘ **ì½”ë“œ ê´€ë¦¬ ì²´ê³„**ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ í†µí•© êµ¬í˜„

## âœ… **ì™„ë£Œëœ ì‘ì—…**

### 1ï¸âƒ£ **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½**

#### **ë³€ê²½ ì „**
```sql
-- ê¸°ì¡´ ìŠ¤í‚¤ë§ˆ
brand_seq INTEGER REFERENCES tbl_brand(seq)  -- ë³„ë„ ë¸Œëœë“œ í…Œì´ë¸” ì‚¬ìš©
category_code_seq INTEGER REFERENCES tbl_code(seq)  -- ì½”ë“œ ì²´ê³„ ì‚¬ìš©
type_code_seq INTEGER REFERENCES tbl_code(seq)      -- ì½”ë“œ ì²´ê³„ ì‚¬ìš©  
product_year VARCHAR(4)                              -- ë‹¨ìˆœ í…ìŠ¤íŠ¸ í•„ë“œ
```

#### **ë³€ê²½ í›„**
```sql
-- í†µí•©ëœ ìŠ¤í‚¤ë§ˆ (ëª¨ë“  ë¶„ë¥˜ê°€ ì½”ë“œ ì²´ê³„ ì‚¬ìš©)
brand_code_seq INTEGER REFERENCES tbl_code(seq)      -- ë¸Œëœë“œ (BRAND ê·¸ë£¹)
category_code_seq INTEGER REFERENCES tbl_code(seq)   -- í’ˆëª© (PRT ê·¸ë£¹)
type_code_seq INTEGER REFERENCES tbl_code(seq)       -- íƒ€ì… (TP ê·¸ë£¹)
year_code_seq INTEGER REFERENCES tbl_code(seq)       -- ë…„ë„ (YR ê·¸ë£¹)
```

### 2ï¸âƒ£ **ì½”ë“œ ì²´ê³„ ë§¤í•‘**

| ë¶„ë¥˜ | ì½”ë“œ ê·¸ë£¹ | ê·¸ë£¹ SEQ | í•˜ìœ„ ì½”ë“œ ìˆ˜ | ë§¤í•‘ ì™„ë£Œ |
|------|-----------|----------|--------------|-----------|
| **ë¸Œëœë“œ** | `BRAND` | 28 | 14ê°œ | âœ… 7ê°œ |
| **í’ˆëª©** | `PRT` | 39 | 10ê°œ | âœ… ì‚¬ìš©ì¤‘ |
| **íƒ€ì…** | `TP` | 210 | 20ê°œ | âœ… ì‚¬ìš©ì¤‘ |
| **ë…„ë„** | `YR` | 219 | 15ê°œ | âœ… 531ê°œ |

#### **ë¸Œëœë“œ ë§¤í•‘ ê²°ê³¼**
```
íŒ”ë¦¬ (Brand:5 â†’ Code:34)
ì•„ì´ìºë¦¬ (Brand:7 â†’ Code:2281)  
ë² ë¹„ëª¨ë“œ (Brand:9 â†’ Code:36)
S.P.R (Brand:10 â†’ Code:37)
ê¸°íƒ€ (Brand:11 â†’ Code:38)
```

#### **ë…„ë„ ë§¤í•‘ ê²°ê³¼**
```
11 â†’ 2011 (seq: 220)
12 â†’ 2012 (seq: 221)
...
24 â†’ 2024 (seq: 3490)
25 â†’ 2025 (seq: 3605)
```

### 3ï¸âƒ£ **ëª¨ë¸ ë³€ê²½ (Product í´ë˜ìŠ¤)**

#### **ë³€ê²½ ì „**
```python
brand_seq = db.Column(db.Integer, db.ForeignKey('tbl_brand.seq'))
product_year = db.Column(db.String(4))

# ê´€ê³„ ì„¤ì •
brand = db.relationship('Brand', foreign_keys=[brand_seq])
```

#### **ë³€ê²½ í›„**
```python
brand_code_seq = db.Column(db.Integer, db.ForeignKey('tbl_code.seq'))
year_code_seq = db.Column(db.Integer, db.ForeignKey('tbl_code.seq'))

# ê´€ê³„ ì„¤ì • (ëª¨ë‘ ì½”ë“œ ì²´ê³„ ì‚¬ìš©)
brand_code = db.relationship('Code', foreign_keys=[brand_code_seq])
year_code = db.relationship('Code', foreign_keys=[year_code_seq])
```

### 4ï¸âƒ£ **API ë³€ê²½**

#### **ìƒí’ˆ ì¡°íšŒ API**
```python
# ë³€ê²½ ì „
brand_seq = request.args.get('brand_seq', type=int)

# ë³€ê²½ í›„  
brand_code_seq = request.args.get('brand_code_seq', type=int)
year_code_seq = request.args.get('year_code_seq', type=int)
```

#### **ì½”ë“œ ì¡°íšŒ API**
```python
# ë³€ê²½ ì „
if code_type == 'brands':
    codes = Brand.get_brands_by_company(current_company_id)

# ë³€ê²½ í›„
if code_type == 'brands':
    codes = Code.get_codes_by_group_name('ë¸Œëœë“œ', company_id=current_company_id)
```

### 5ï¸âƒ£ **UI ë³€ê²½**

#### **ìƒí’ˆ ë“±ë¡ ëª¨ë‹¬**
```html
<!-- ë³€ê²½ ì „ -->
<select id="modal_brand_seq" name="brand_seq">
<input type="text" id="modal_product_year" name="product_year">

<!-- ë³€ê²½ í›„ -->
<select id="modal_brand_code_seq" name="brand_code_seq">
<select id="modal_year_code_seq" name="year_code_seq">
```

#### **ê²€ìƒ‰ í•„í„°**
```html
<!-- ë¸Œëœë“œ í•„í„° (ì½”ë“œ ì²´ê³„ ì‚¬ìš©) -->
<select id="brandFilter">
    {% for brand in brand_codes %}
    <option value="{{ brand.seq }}">{{ brand.code_name }}</option>
    {% endfor %}
</select>
```

### 6ï¸âƒ£ **ì—‘ì…€ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ì§€ì›**

#### **ì—‘ì…€ ì—…ë¡œë“œ**
```python
# ë¸Œëœë“œ ë§¤í•‘ (ì½”ë“œ ì²´ê³„ ì‚¬ìš©)
brand_codes = Code.get_codes_by_group_name('ë¸Œëœë“œ')
for code in brand_codes:
    if code['code_name'] == brand_name:
        brand_code_seq = code['seq']
        break

# ë…„ë„ ë§¤í•‘ (ì½”ë“œ ì²´ê³„ ì‚¬ìš©)  
year_codes = Code.get_codes_by_group_name('ë…„ë„')
for code in year_codes:
    if code['code_name'] == year_name:
        year_code_seq = code['seq']
        break
```

#### **ì—‘ì…€ ë‹¤ìš´ë¡œë“œ**
```python
'ë¸Œëœë“œ': product.brand_code.code_name if product.brand_code else '',
'ë…„ë„': product.year_code.code_name if product.year_code else '',
```

## ğŸ“Š **ë§ˆì´ê·¸ë ˆì´ì…˜ ê²°ê³¼**

### **ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ í†µê³„**
- **ì´ ìƒí’ˆ ìˆ˜**: 546ê°œ
- **ë¸Œëœë“œ ë§¤í•‘**: 85ê°œ (7ê°œ ë¸Œëœë“œ)
- **ë…„ë„ ë§¤í•‘**: 531ê°œ (15ê°œ ë…„ë„)
- **íšŒì‚¬ ë¶„í¬**: ëª¨ë‘ ì—ì´ì›(company_id=1)

### **ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì™„ë£Œ**
```sql
-- ìƒˆë¡œìš´ ì»¬ëŸ¼ êµ¬ì¡°
brand_code_seq: integer (nullable: YES)
category_code_seq: integer (nullable: YES)  
type_code_seq: integer (nullable: YES)
year_code_seq: integer (nullable: YES)
```

## ğŸ¯ **ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ ë‹¬ì„±ë„**

| ìš”êµ¬ì‚¬í•­ | ìƒíƒœ | ì„¤ëª… |
|---------|------|------|
| ë¸Œëœë“œë¥¼ ì½”ë“œ ì²´ê³„ì—ì„œ ê°€ì ¸ì˜¤ê¸° | âœ… ì™„ë£Œ | BRAND ê·¸ë£¹ ì‚¬ìš© |
| í’ˆëª©ì„ ì½”ë“œ ì²´ê³„ì—ì„œ ê°€ì ¸ì˜¤ê¸° | âœ… ì™„ë£Œ | PRT ê·¸ë£¹ ì‚¬ìš© |
| íƒ€ì…ì„ ì½”ë“œ ì²´ê³„ì—ì„œ ê°€ì ¸ì˜¤ê¸° | âœ… ì™„ë£Œ | TP ê·¸ë£¹ ì‚¬ìš© |
| ë…„ë„ë¥¼ ì½”ë“œ ì²´ê³„ì—ì„œ ê°€ì ¸ì˜¤ê¸° | âœ… ì™„ë£Œ | YR ê·¸ë£¹ ì‚¬ìš© |

## ğŸ”§ **ì½”ë“œ ì²´ê³„ êµ¬ì¡°**

### **BRAND ê·¸ë£¹ (ë¸Œëœë“œ)**
```
BRAND (seq: 28)
â”œâ”€â”€ RY (RYAN) - seq: 29
â”œâ”€â”€ JI (JOIE) - seq: 30  
â”œâ”€â”€ NN (NUNA) - seq: 31
â”œâ”€â”€ TT (TEAMTEX) - seq: 32
â”œâ”€â”€ LG (Le grove) - seq: 33
â””â”€â”€ ... (14ê°œ)
```

### **PRT ê·¸ë£¹ (í’ˆëª©)**
```
PRT (seq: 39)
â”œâ”€â”€ F (FERRARI) - seq: 40
â”œâ”€â”€ A (NANIA) - seq: 41
â”œâ”€â”€ X (ëŸ­ìŠ¤) - seq: 42
â”œâ”€â”€ P (Fisher Price) - seq: 43
â””â”€â”€ ... (10ê°œ)
```

### **TP ê·¸ë£¹ (íƒ€ì…)**
```
TP (seq: 210)
â”œâ”€â”€ 00 (ì—†ìŒ) - seq: 211
â”œâ”€â”€ A1 (ì¼ë°˜) - seq: 212
â”œâ”€â”€ A2 (ëŸ­ìŠ¤) - seq: 213
â”œâ”€â”€ A3 (í€¼íŠ¸) - seq: 214
â””â”€â”€ ... (20ê°œ)
```

### **YR ê·¸ë£¹ (ë…„ë„)**
```
YR (seq: 219)
â”œâ”€â”€ 11 (2011) - seq: 220
â”œâ”€â”€ 12 (2012) - seq: 221
â”œâ”€â”€ 13 (2013) - seq: 222
â”œâ”€â”€ 14 (2014) - seq: 223
â””â”€â”€ ... (15ê°œ)
```

## ğŸš€ **ì‹¤í–‰ëœ ìŠ¤í¬ë¦½íŠ¸**

1. **`update_product_schema_safe.py`**: ì•ˆì „í•œ ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸
2. **ëª¨ë¸ ë³€ê²½**: `app/common/models.py`
3. **API ë³€ê²½**: `app/product/routes.py`
4. **UI ë³€ê²½**: `app/templates/product/index.html`

## âœ¨ **ê¸°ìˆ ì  ê°œì„ ì‚¬í•­**

1. **ì¼ê´€ì„±**: ëª¨ë“  ë¶„ë¥˜ê°€ ë™ì¼í•œ ì½”ë“œ ì²´ê³„ ì‚¬ìš©
2. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ë¸Œëœë“œ/ë…„ë„ ì¶”ê°€ ì‹œ ì½”ë“œ í…Œì´ë¸”ë§Œ ìˆ˜ì •
3. **ìœ ì§€ë³´ìˆ˜ì„±**: ë³„ë„ ë¸Œëœë“œ í…Œì´ë¸” ì œê±°ë¡œ ë³µì¡ì„± ê°ì†Œ
4. **ë°ì´í„° ë¬´ê²°ì„±**: Foreign Key ì œì•½ìœ¼ë¡œ ì°¸ì¡° ë¬´ê²°ì„± ë³´ì¥

## ğŸ” **í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**

1. âœ… **ìƒí’ˆ ëª©ë¡ ì¡°íšŒ**: ë¸Œëœë“œ, í’ˆëª©, íƒ€ì…, ë…„ë„ ì •ìƒ í‘œì‹œ
2. âœ… **ìƒí’ˆ ë“±ë¡**: ëª¨ë“  ë¶„ë¥˜ ì„ íƒ ê°€ëŠ¥
3. âœ… **ìƒí’ˆ ìˆ˜ì •**: ê¸°ì¡´ ë°ì´í„° ìœ ì§€í•˜ë©° ìˆ˜ì • ê°€ëŠ¥
4. âœ… **ê²€ìƒ‰ í•„í„°**: ë¸Œëœë“œ, í’ˆëª©, íƒ€ì…, ë…„ë„ë³„ í•„í„°ë§
5. âœ… **ì—‘ì…€ ì—…ë¡œë“œ**: ì½”ë“œëª… ê¸°ë°˜ ë§¤í•‘
6. âœ… **ì—‘ì…€ ë‹¤ìš´ë¡œë“œ**: ì½”ë“œëª…ìœ¼ë¡œ ì¶œë ¥

## ğŸ“ **ë‹¤ìŒ ë‹¨ê³„**

1. **ë§¤í•‘ë˜ì§€ ì•Šì€ ë¸Œëœë“œ**: í•„ìš”ì‹œ BRAND ê·¸ë£¹ì— ì¶”ê°€ ì½”ë“œ ìƒì„±
2. **ì„±ëŠ¥ ìµœì í™”**: ì½”ë“œ ì¡°íšŒ ìºì‹± ì ìš©
3. **ì‚¬ìš©ì í”¼ë“œë°±**: ì‹¤ì œ ì‚¬ìš© í›„ ê°œì„ ì‚¬í•­ ìˆ˜ì§‘

---
**ì‘ì—…ì**: AI Assistant (Claude Sonnet 4)  
**ì™„ë£Œì¼**: 2025-08-08  
**ìƒíƒœ**: âœ… **ëª¨ë“  ë¶„ë¥˜ ì½”ë“œ ì²´ê³„ í†µí•© ì™„ë£Œ** - ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ 100% ë‹¬ì„± 