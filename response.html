<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="current-company-id" content="1">
    <title>상품관리</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css">
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
    
    <!-- Custom CSS -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8f9fa;
        }
        
        /* 메인 콘텐츠 영역을 사이드바 너비만큼 오른쪽으로 이동 */
        .main-content {
            margin-left: 250px;
            min-height: 100vh;
            padding: 20px;
        }
        
        /* 반응형: 모바일에서는 사이드바가 숨겨지므로 마진 제거 */
        @media (max-width: 768px) {
            .main-content {
                margin-left: 0;
            }
        }
        
        /* 카드 스타일 */
        .card {
            border: none;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            border-radius: 0.5rem;
        }
        
        .card-header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            border-radius: 0.5rem 0.5rem 0 0 !important;
        }
        
        /* 테이블 스타일 */
        .table {
            margin-bottom: 0;
        }
        
        .table th {
            border-top: none;
            font-weight: 600;
            background-color: #f8f9fa;
        }
        
        /* 사이드바 스타일은 별도 파일에서 처리 */
        
        /* 버튼 스타일 */
        .btn {
            border-radius: 0.375rem;
        }
        
        /* 배지 스타일 */
        .badge {
            font-size: 0.75rem;
        }
        
        /* 플래시 메시지 스타일 */
        .alert {
            border-radius: 0.5rem;
            border: none;
        }
    </style>
    
    
<!-- DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
<!-- Bootstrap Select CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css" rel="stylesheet">
<!-- Custom CSS -->
<style>
th {
    cursor: pointer;
    user-select: none;
}
th:hover {
    background-color: #e9ecef;
}
.search-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}
.search-card .form-control {
    border-radius: 25px;
}
.table-card {
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
}
.btn-excel {
    background: linear-gradient(45deg, #28a745, #20c997);
    border: none;
    color: white;
}
.product-status-active {
    color: #28a745;
    font-weight: bold;
}
.product-status-inactive {
    color: #dc3545;
    font-weight: bold;
}
.price-display {
    color: #0d6efd;
    font-weight: 600;
}
.company-badge-1 {
    background: linear-gradient(45deg, #667eea, #764ba2);
}
.company-badge-2 {
    background: linear-gradient(45deg, #f093fb, #f5576c);
}
.modal-header-add {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}
.modal-header-edit {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
}
.required {
    color: #dc3545;
}
.file-upload-area {
    border: 2px dashed #dee2e6;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    background: #f8f9fa;
    cursor: pointer;
    transition: all 0.3s ease;
}
.file-upload-area:hover {
    border-color: #667eea;
    background: #e7f1ff;
}
.file-upload-area.dragover {
    border-color: #667eea;
    background: #e7f1ff;
    transform: scale(1.02);
}
</style>

</head>

<body>
    <!-- 사이드바 포함 -->
    
        <!-- 좌측 사이드바 -->
<div id="sidebar" class="d-flex flex-column bg-light border-end vh-100 position-fixed" style="width: 250px; z-index: 1000;">
    <!-- 로고 섹션 -->
    <div class="p-3 border-bottom bg-primary text-white text-center">
        <a href="/" class="text-white text-decoration-none" style="cursor: pointer; transition: opacity 0.3s ease;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
            <div class="mb-2">
                <img src="/static/img/logo.png" alt="MIS v2 Logo" style="max-width: 80px; max-height: 50px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <i class="fas fa-building fa-2x" style="display: none;"></i>
            </div>
            <h5 class="mb-0">MIS v2</h5>
            <small>Management Information System</small>
        </a>
    </div>
    
    <!-- 사용자 패널 -->
    <div class="p-3 border-bottom">
        <div class="d-flex align-items-center">
            <div class="me-3">
                <i class="fas fa-user-circle fa-2x text-primary"></i>
            </div>
            <div>
                <div class="fw-bold"></div>
                <small class="text-muted"></small>
            </div>
        </div>
    </div>
    
    <!-- 회사 전환 (멀티테넌트) -->
    
    <div class="p-3 border-bottom bg-white">
        <div class="mb-2">
            <small class="text-muted fw-bold">현재 회사</small>
        </div>
        <div class="dropdown">
            <button class="btn btn-outline-primary btn-sm dropdown-toggle w-100" type="button" id="companyDropdown" data-bs-toggle="dropdown">
                <i class="fas fa-building me-2"></i>
                
                    에이원
                
            </button>
            <ul class="dropdown-menu w-100">
                
                <li>
                    <a class="dropdown-item active" 
                       href="#" onclick="switchCompany(1)">
                        <i class="fas fa-building me-2"></i>
                        에이원
                        <span class="badge bg-primary ms-2">주속</span>
                    </a>
                </li>
                
                <li>
                    <a class="dropdown-item " 
                       href="#" onclick="switchCompany(2)">
                        <i class="fas fa-building me-2"></i>
                        에이원 월드
                        
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
    
        
    <!-- 메인 네비게이션 -->
    <nav class="flex-grow-1 overflow-auto">
        <ul class="nav nav-pills flex-column p-2" id="sidebar-menu">
            <li class="nav-item"><small class="text-muted fw-bold px-2">NAVIGATION</small></li>
            
            <!-- 대시보드 -->
            <li class="nav-item">
                <a class="nav-link text-dark" href="/">
                    <i class="fas fa-tachometer-alt me-2"></i> 대시보드
                </a>
            </li>
            
            <!-- 관리자 메뉴 -->
            <li class="nav-item">
                <a class="nav-link text-dark dropdown-toggle" href="#adminMenu" data-bs-toggle="collapse" role="button" aria-expanded="false">
                    <i class="fas fa-cog me-2"></i> 관리자
                </a>
                <div class="collapse" id="adminMenu">
                    <div class="ms-3">
                        <a class="nav-link text-dark py-1" href="/admin/menu_management">
                            <i class="fas fa-sitemap me-2"></i> 메뉴 관리
                        </a>
                        <a class="nav-link text-dark py-1" href="/admin/code_management">
                            <i class="fas fa-code me-2"></i> 코드 관리
                            </a>
                        <a class="nav-link text-dark py-1" href="/admin/department_management">
                            <i class="fas fa-building me-2"></i> 부서 관리
                            </a>
                        <a class="nav-link text-dark py-1" href="/admin/user_management">
                            <i class="fas fa-users me-2"></i> 사용자 관리
                            </a>
                        <a class="nav-link text-dark py-1" href="/admin/permissions">
                            <i class="fas fa-key me-2"></i> 권한 관리
                            </a>
                        <a class="nav-link text-dark py-1" href="/admin/brand_management">
                            <i class="fas fa-tags me-2"></i> 브랜드 관리
                            </a>
                    </div>
                </div>
            </li>
            
            <!-- ERPia 배치 -->
            <li class="nav-item">
                <a class="nav-link text-dark dropdown-toggle" href="#batchMenu" data-bs-toggle="collapse" role="button" aria-expanded="false">
                    <i class="fas fa-clock me-2"></i> ERPia 배치
                </a>
                <div class="collapse" id="batchMenu">
                    <div class="ms-3">
                        <a class="nav-link text-dark py-1" href="/batch/">
                            <i class="fas fa-tachometer-alt me-2"></i> 배치 대시보드
                            </a>
                        <a class="nav-link text-dark py-1" href="/batch/settings">
                            <i class="fas fa-cog me-2"></i> 배치 설정
                            </a>
                    </div>
                </div>
            </li>
            
            <!-- 사은품 관리 -->
            <li class="nav-item">
                <a class="nav-link text-dark dropdown-toggle" href="#giftMenu" data-bs-toggle="collapse" role="button" aria-expanded="false">
                    <i class="fas fa-gift me-2"></i> 사은품 관리
                </a>
                <div class="collapse" id="giftMenu">
                    <div class="ms-3">
                        <a class="nav-link text-dark py-1" href="/gift/">
                            <i class="fas fa-list me-2"></i> 분류 관리
                        </a>
                        <a class="nav-link text-dark py-1" href="/gift/settings">
                            <i class="fas fa-cog me-2"></i> 분류 설정
                </a>
                    </div>
                </div>
            </li>
            
            <!-- 영업 관리 -->
            <li class="nav-item">
                <a class="nav-link" href="#sales-menu" data-bs-toggle="collapse">
                    <i class="fas fa-chart-line"></i>
                    <span>영업 관리</span>
                    <i class="fas fa-chevron-down ms-auto"></i>
                </a>
                <div class="collapse" id="sales-menu">
                    <ul class="nav nav-pills flex-column ms-3">
                        <li class="nav-item">
                            <a class="nav-link" href="/shop/index">
                                <i class="fas fa-store"></i> 매장 관리
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/product/">
                                <i class="fas fa-box"></i> 상품관리
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-users"></i> 영업사원 관리
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-chart-bar"></i> 영업 실적
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-handshake"></i> 거래처 관리
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- 고객 관리 -->
            <li class="nav-item">
                <a class="nav-link" href="#customer-menu" data-bs-toggle="collapse">
                    <i class="fas fa-users-cog"></i>
                    <span>고객 관리</span>
                    <i class="fas fa-chevron-down ms-auto"></i>
                </a>
                <div class="collapse" id="customer-menu">
                    <ul class="nav nav-pills flex-column ms-3">
                        <li class="nav-item">
                            <a class="nav-link" href="/customer/">
                                <i class="fas fa-user-friends"></i> 고객 목록
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/customer/as-list">
                                <i class="fas fa-list"></i> A/S 접수 목록
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/customer/analysis">
                                <i class="fas fa-chart-line"></i> 고객 분석
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- 매장 관리 (기존 독립 메뉴 제거) -->
        </ul>
    </nav>
    
    <!-- 하단 로그아웃 -->
    <div class="p-3 border-top">
        <a href="/auth/logout" class="btn btn-outline-danger w-100">
            <i class="fas fa-sign-out-alt me-2"></i> 로그아웃
        </a>
    </div>
</div>

<!-- 사이드바 토글 버튼 -->
<button class="btn btn-light d-md-none position-fixed" style="top: 10px; left: 10px; z-index: 1001;" id="sidebar-toggle">
    <i class="fas fa-bars"></i>
</button>

<!-- 사이드바 JavaScript -->
<script>
// 회사 전환 함수
function switchCompany(companyId) {
    $.post('/api/switch-company', {
        company_id: companyId
    }, function(data) {
        if (data.success) {
            // 성공 시 페이지 새로고침
            location.reload();
        } else {
            alert('회사 전환 실패: ' + data.message);
        }
    }).fail(function() {
        alert('회사 전환 중 오류가 발생했습니다.');
    });
}

// 사이드바 토글 (모바일)
document.getElementById('sidebar-toggle')?.addEventListener('click', function() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('d-none');
});
</script>

<style>
@media (max-width: 768px) {
    #sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    #sidebar.show {
        transform: translateX(0);
    }
    .main-content {
        margin-left: 0 !important;
    }
}

@media (min-width: 769px) {
    .main-content {
        margin-left: 250px;
    }
}
</style> 
    

    <!-- 메인 콘텐츠 영역 -->
    <div class="main-content">
        <!-- 상단 네비게이션 바 (옵션) -->
        
        <nav class="navbar navbar-expand-lg navbar-light bg-white mb-4 shadow-sm">
            <div class="container-fluid">
                <span class="navbar-brand mb-0 h1">
                    <i class="fas fa-tachometer-alt me-2"></i>
                    대시보드
                </span>
                
                <div class="navbar-nav ms-auto">
                    <!-- 알림 -->
                    <div class="nav-item dropdown">
                        <a class="nav-link" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-bell"></i>
                            <span class="badge bg-danger">3</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><span class="dropdown-item-text">새로운 알림이 없습니다.</span></li>
                        </ul>
                    </div>
                    
                    <!-- 사용자 메뉴 -->
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle me-1"></i>
                            사용자
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>내 정보</a></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>설정</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/auth/logout"><i class="fas fa-sign-out-alt me-2"></i>로그아웃</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
        

        <!-- 플래시 메시지 -->
        
            
        

        <!-- 메인 콘텐츠 -->
        <main class="container-fluid">
            
<div class="container-fluid">
    <!-- 페이지 헤더 -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h3 mb-0">
                <i class="fas fa-box me-2"></i>상품관리
            </h1>
            <p class="text-muted mb-0">상품 정보를 등록, 수정, 삭제할 수 있습니다</p>
        </div>
        <div>
            <span class="badge bg-primary fs-6" id="productCount">0</span>개 상품
        </div>
    </div>

    <!-- 검색 영역 -->
    <div class="card mb-4 search-card">
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-3">
                    <label for="searchInput" class="form-label">
                        <i class="fas fa-search me-1"></i>통합검색
                    </label>
                    <div class="input-group">
                        <span class="input-group-text bg-white">
                            <i class="fas fa-search"></i>
                        </span>
                        <input type="text" class="form-control" id="searchInput" 
                               placeholder="상품명, 코드, 브랜드명..." onkeyup="searchProducts()">
                    </div>
                </div>
                <div class="col-md-2">
                    <label for="companyFilter" class="form-label">회사</label>
                    <select class="form-select" id="companyFilter" onchange="filterProducts()">
                        <option value="">전체</option>
                        <option value="1">에이원</option>
                        <option value="2">에이원월드</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="brandFilter" class="form-label">브랜드</label>
                    <select class="form-select" id="brandFilter" onchange="filterProducts()">
                        <option value="">전체</option>
                        
                        <option value="2281">아이캐리</option>
                        
                        <option value="30">JOIE</option>
                        
                        <option value="31">NUNA</option>
                        
                        <option value="32">TEAMTEX</option>
                        
                        <option value="33">Le grove</option>
                        
                        <option value="34">팔리</option>
                        
                        <option value="35">MOMPUSH</option>
                        
                        <option value="36">베비모드</option>
                        
                        <option value="37">S.P.R</option>
                        
                        <option value="38">기타</option>
                        
                        <option value="2600">비비러브</option>
                        
                        <option value="2654">리안펫</option>
                        
                        <option value="3506">타보 펫츠</option>
                        
                        <option value="29">RYAN</option>
                        
                        <option value="3780">BBLUV</option>
                        
                        <option value="3781">i-carry</option>
                        
                        <option value="3782">JOIE</option>
                        
                        <option value="3783">Le grove</option>
                        
                        <option value="3784">MOMPUSH</option>
                        
                        <option value="3785">NUNA</option>
                        
                        <option value="3786">PALI</option>
                        
                        <option value="3787">RYAN</option>
                        
                        <option value="3788">RYAN PET</option>
                        
                        <option value="3789">TAVO PETS</option>
                        
                        <option value="3790">TEAMTEX</option>
                        
                        <option value="3791">기타</option>
                        
                        <option value="3854">뉴나</option>
                        
                        <option value="3855">리안</option>
                        
                        <option value="3856">조이</option>
                        
                        <option value="3857">페라리</option>
                        
                        <option value="3858">나니아</option>
                        
                        <option value="3859">피셔프라이스</option>
                        
                        <option value="3860">페프</option>
                        
                        <option value="3861">미지정</option>
                        
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="categoryFilter" class="form-label">품목</label>
                    <select class="form-select" id="categoryFilter" onchange="filterProducts()">
                        <option value="">전체</option>
                        
                        <option value="40">FERRARI</option>
                        
                        <option value="41">NANIA</option>
                        
                        <option value="42">럭스</option>
                        
                        <option value="43">Fisher Price</option>
                        
                        <option value="44">제품</option>
                        
                        <option value="45">소품(국내)</option>
                        
                        <option value="46">수입</option>
                        
                        <option value="47">외주제품</option>
                        
                        <option value="48">부품</option>
                        
                        <option value="2728">미고</option>
                        
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="statusFilter" class="form-label">상태</label>
                    <select class="form-select" id="statusFilter" onchange="filterProducts()">
                        <option value="">전체</option>
                        <option value="true">활성</option>
                        <option value="false">비활성</option>
                    </select>
                </div>
                <div class="col-md-1 d-flex align-items-end">
                    <button type="button" class="btn btn-outline-light w-100" onclick="resetFilters()">
                        <i class="fas fa-refresh"></i>
                    </button>
                </div>
            </div>
            
            <!-- 확장 필터 (두 번째 줄) -->
            <div class="row g-3 mt-2">
                <div class="col-md-2">
                    <label for="typeFilter" class="form-label">타입</label>
                    <select class="form-select" id="typeFilter" onchange="filterProducts()">
                        <option value="">전체</option>
                        
                        <option value="3842">스탠다드</option>
                        
                        <option value="3843">디럭스</option>
                        
                        <option value="3844">프리미엄</option>
                        
                        <option value="3845">에코</option>
                        
                        <option value="3846">럭셔리</option>
                        
                        <option value="3847">하이브리드</option>
                        
                        <option value="3848">게임</option>
                        
                        <option value="3849">토이</option>
                        
                        <option value="3850">액세서리</option>
                        
                        <option value="3914">엘리트</option>
                        
                        <option value="3864">미지정</option>
                        
                        <option value="3898">클래식</option>
                        
                        <option value="3899">베이직</option>
                        
                        <option value="3900">하이엔드</option>
                        
                        <option value="3901">카시트타입</option>
                        
                        <option value="3902">체어타입</option>
                        
                        <option value="3903">베이스타입</option>
                        
                        <option value="3904">그룹0</option>
                        
                        <option value="3905">그룹1</option>
                        
                        <option value="3906">그룹2</option>
                        
                        <option value="3907">그룹3</option>
                        
                        <option value="3908">아이사이즈</option>
                        
                        <option value="3909">안전타입</option>
                        
                        <option value="3910">컴포트</option>
                        
                        <option value="3911">스마트</option>
                        
                        <option value="3912">플러스</option>
                        
                        <option value="3913">마스터</option>
                        
                        <option value="211">없음</option>
                        
                        <option value="212">일반</option>
                        
                        <option value="213">럭스</option>
                        
                        <option value="214">퀼트</option>
                        
                        <option value="215">퍼스트</option>
                        
                        <option value="216">마이카시트</option>
                        
                        <option value="217">아고라</option>
                        
                        <option value="218">싸세빠리</option>
                        
                        <option value="2251">베이직</option>
                        
                        <option value="2252">스텐다드</option>
                        
                        <option value="2253">플레티넘</option>
                        
                        <option value="2254">시그니처</option>
                        
                        <option value="2255">LFC</option>
                        
                        <option value="3391">페이스쉴드</option>
                        
                        <option value="3394">카시트</option>
                        
                        <option value="3399">뮤즈</option>
                        
                        <option value="3405">스텝</option>
                        
                        <option value="3406">체인저</option>
                        
                        <option value="3424">마그네틱 GL</option>
                        
                        <option value="3425">마그네틱 KR</option>
                        
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="yearFilter" class="form-label">년도</label>
                    <select class="form-select" id="yearFilter" onchange="filterProducts()">
                        <option value="">전체</option>
                        
                        <option value="3852">  </option>
                        
                        <option value="3853">2010</option>
                        
                        <option value="220">2011</option>
                        
                        <option value="221">2012</option>
                        
                        <option value="222">2013</option>
                        
                        <option value="223">2014</option>
                        
                        <option value="224">2015</option>
                        
                        <option value="225">2016</option>
                        
                        <option value="226">2017</option>
                        
                        <option value="227">2018</option>
                        
                        <option value="228">2019</option>
                        
                        <option value="229">2020</option>
                        
                        <option value="2864">2021</option>
                        
                        <option value="3389">2022</option>
                        
                        <option value="3472">2023</option>
                        
                        <option value="3490">2024</option>
                        
                        <option value="3605">2025</option>
                        
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="colorFilter" class="form-label">색상</label>
                    <select class="form-select" id="colorFilter" onchange="filterProducts()">
                        <option value="">전체</option>
                        
                        <option value="289">G퍼플</option>
                        
                        <option value="231">G올리브</option>
                        
                        <option value="232">C나뚜르</option>
                        
                        <option value="233">C나뚜르포인트</option>
                        
                        <option value="234">C대빈드</option>
                        
                        <option value="235">C대이크</option>
                        
                        <option value="236">C빈드</option>
                        
                        <option value="237">C빈드포인트</option>
                        
                        <option value="238">C소빈드</option>
                        
                        <option value="239">C소이크</option>
                        
                        <option value="240">C이크A</option>
                        
                        <option value="241">C이크B</option>
                        
                        <option value="242">C이크W</option>
                        
                        <option value="243">C트레칸트</option>
                        
                        <option value="244">C트레칸트M</option>
                        
                        <option value="245">DV나뚜르</option>
                        
                        <option value="246">DV빈드</option>
                        
                        <option value="247">DV이크</option>
                        
                        <option value="248">DV트레칸트</option>
                        
                        <option value="249">D나뚜르</option>
                        
                        <option value="250">D빈드</option>
                        
                        <option value="251">D이크</option>
                        
                        <option value="252">D트레칸트</option>
                        
                        <option value="2757">애쉬 그레이</option>
                        
                        <option value="253">PE그레이</option>
                        
                        <option value="254">PE나뚜루</option>
                        
                        <option value="255">PE머스타드</option>
                        
                        <option value="256">PE브라운</option>
                        
                        <option value="257">PE블루</option>
                        
                        <option value="258">PE옐로우</option>
                        
                        <option value="259">PE트레칸트</option>
                        
                        <option value="260">대아이보리</option>
                        
                        <option value="261">소아이보리</option>
                        
                        <option value="262">중아이보리</option>
                        
                        <option value="263">PE민트</option>
                        
                        <option value="264">애쉬 베이지</option>
                        
                        <option value="265">O베이지</option>
                        
                        <option value="266">S베이지</option>
                        
                        <option value="267">G네이비</option>
                        
                        <option value="268">B멀티</option>
                        
                        <option value="269">B로브베이지</option>
                        
                        <option value="270">B로브블루</option>
                        
                        <option value="271">B모네</option>
                        
                        <option value="272">B블루</option>
                        
                        <option value="273">B스콜</option>
                        
                        <option value="274">B이크</option>
                        
                        <option value="275">C로브</option>
                        
                        <option value="276">C모네</option>
                        
                        <option value="277">C이크</option>
                        
                        <option value="278">G그레이</option>
                        
                        <option value="279">G그린</option>
                        
                        <option value="280">G레드</option>
                        
                        <option value="281">G민트</option>
                        
                        <option value="282">G베이지</option>
                        
                        <option value="283">G브라운</option>
                        
                        <option value="284">G블랙</option>
                        
                        <option value="285">G블루</option>
                        
                        <option value="286">G옐로우</option>
                        
                        <option value="287">G오렌지</option>
                        
                        <option value="288">G카키</option>
                        
                        <option value="2595">럭스 그리스</option>
                        
                        <option value="290">G핑크</option>
                        
                        <option value="291">G화이트</option>
                        
                        <option value="292">M그레이</option>
                        
                        <option value="293">M레드</option>
                        
                        <option value="294">M머스터드</option>
                        
                        <option value="295">M베이지</option>
                        
                        <option value="296">M브라운</option>
                        
                        <option value="297">M블랙</option>
                        
                        <option value="298">M블루</option>
                        
                        <option value="299">M오렌지</option>
                        
                        <option value="300">M카키</option>
                        
                        <option value="301">O그레이</option>
                        
                        <option value="302">O그린</option>
                        
                        <option value="303">O네이비</option>
                        
                        <option value="304">O레드</option>
                        
                        <option value="305">O멀티</option>
                        
                        <option value="306">O민트</option>
                        
                        <option value="307">O브라운</option>
                        
                        <option value="308">O블랙</option>
                        
                        <option value="309">O블루</option>
                        
                        <option value="310">O퍼플</option>
                        
                        <option value="311">O핑크</option>
                        
                        <option value="312">O화이트</option>
                        
                        <option value="313">PE카키</option>
                        
                        <option value="314">스페이스 그레이</option>
                        
                        <option value="315">S네이비</option>
                        
                        <option value="316">S브라운</option>
                        
                        <option value="317">S블랙</option>
                        
                        <option value="318">S화이트</option>
                        
                        <option value="319">포기그레이</option>
                        
                        <option value="320">올리브 그린</option>
                        
                        <option value="321">기타</option>
                        
                        <option value="322">미드 네이비</option>
                        
                        <option value="323">레드</option>
                        
                        <option value="324">멀티</option>
                        
                        <option value="325">코코아브라운</option>
                        
                        <option value="326">캐비어 블랙</option>
                        
                        <option value="327">윈드 블루</option>
                        
                        <option value="328">오렌지</option>
                        
                        <option value="329">퍼플</option>
                        
                        <option value="330">핑크</option>
                        
                        <option value="331">화이트</option>
                        
                        <option value="332">제트</option>
                        
                        <option value="3524">시더</option>
                        
                        <option value="641">다크 베리</option>
                        
                        <option value="645">리치 브라운</option>
                        
                        <option value="646">모던 그레이</option>
                        
                        <option value="647">스틸 그레이</option>
                        
                        <option value="648">딥 그레이</option>
                        
                        <option value="649">페일 그레이</option>
                        
                        <option value="650">브라이트 그레이</option>
                        
                        <option value="651">다크 그레이</option>
                        
                        <option value="657">페티드시티</option>
                        
                        <option value="658">도츠</option>
                        
                        <option value="661">카본</option>
                        
                        <option value="663">슬레이트</option>
                        
                        <option value="664">엠버</option>
                        
                        <option value="665">캐비어 블랙</option>
                        
                        <option value="666">나이트</option>
                        
                        <option value="686">다크퓨터</option>
                        
                        <option value="687">크랜베리</option>
                        
                        <option value="688">코랄</option>
                        
                        <option value="689">로얄블랙</option>
                        
                        <option value="1373">럭스 쉐도우</option>
                        
                        <option value="1374">느와르</option>
                        
                        <option value="1375">럭스 루즈</option>
                        
                        <option value="1376">마틸레</option>
                        
                        <option value="1377">그리스</option>
                        
                        <option value="1378">그로세일레</option>
                        
                        <option value="2214">기타</option>
                        
                        <option value="2215">프로스트</option>
                        
                        <option value="2216">아스펜</option>
                        
                        <option value="2217">캐비어</option>
                        
                        <option value="2242">미드나잇 그레이</option>
                        
                        <option value="2243">매트 블랙</option>
                        
                        <option value="2263">알파벳</option>
                        
                        <option value="2284">미스티 그레이</option>
                        
                        <option value="2285">샌디 브라운</option>
                        
                        <option value="2286">더스크 블루</option>
                        
                        <option value="2287">클라우드 민트</option>
                        
                        <option value="2294">캐슈넛 그레이</option>
                        
                        <option value="2295">클라우드 블루</option>
                        
                        <option value="2296">시크 블랙</option>
                        
                        <option value="2297">내추럴 그레이</option>
                        
                        <option value="2301">커피</option>
                        
                        <option value="2307">그레이</option>
                        
                        <option value="2311">스톤</option>
                        
                        <option value="2344">실버 그레이</option>
                        
                        <option value="2345">미스틱 퍼플</option>
                        
                        <option value="2346">차콜 블랙</option>
                        
                        <option value="2465">EBONY</option>
                        
                        <option value="2477">레이번 블랙</option>
                        
                        <option value="2478">앨로이 그레이</option>
                        
                        <option value="2479">스톤 블루</option>
                        
                        <option value="2504">봉쥬르 레드</option>
                        
                        <option value="2505">봉쥬르 블루</option>
                        
                        <option value="2508">사파리</option>
                        
                        <option value="2534">M핑크</option>
                        
                        <option value="2537">그라파이트</option>
                        
                        <option value="2550">레이크</option>
                        
                        <option value="2551">버치</option>
                        
                        <option value="2558">체리</option>
                        
                        <option value="2559">코알</option>
                        
                        <option value="2566">네이비블레이저</option>
                        
                        <option value="2572">플라워스포에버</option>
                        
                        <option value="2573">라일락</option>
                        
                        <option value="2574">딥시</option>
                        
                        <option value="2578">옥스포드</option>
                        
                        <option value="2579">플럼</option>
                        
                        <option value="2590">캐슈</option>
                        
                        <option value="2592">크리스탈 그레이</option>
                        
                        <option value="2593">프렌치 블루</option>
                        
                        <option value="2596">럭스 블루</option>
                        
                        <option value="2597">럭스 루즈</option>
                        
                        <option value="2607">다람쥐</option>
                        
                        <option value="2608">여우</option>
                        
                        <option value="2609">꽃</option>
                        
                        <option value="2621">리치 그레이</option>
                        
                        <option value="2637">아쿠아</option>
                        
                        <option value="2638">라임</option>
                        
                        <option value="2640">아울&amp;폭스</option>
                        
                        <option value="2641">헤지호그&amp;라쿤</option>
                        
                        <option value="2642">피크</option>
                        
                        <option value="2649">도트 그레이</option>
                        
                        <option value="2650">그레이시 블루</option>
                        
                        <option value="2651">밀크 베이지</option>
                        
                        <option value="2658">미스틱블랙</option>
                        
                        <option value="2659">어반그레이</option>
                        
                        <option value="2660">샌디 블루</option>
                        
                        <option value="2670">차콜</option>
                        
                        <option value="2681">그레이 플라넬</option>
                        
                        <option value="2686">마린 네이비</option>
                        
                        <option value="2687">스톤 그레이</option>
                        
                        <option value="2695">샤이니그레이</option>
                        
                        <option value="2696">스페이스블랙</option>
                        
                        <option value="2710">투명 PVC</option>
                        
                        <option value="2721">트레디드</option>
                        
                        <option value="2729">크림 베이지</option>
                        
                        <option value="2730">시크 블루</option>
                        
                        <option value="2743">시크 그레이</option>
                        
                        <option value="2744">더블블랙</option>
                        
                        <option value="2745">잭블랙</option>
                        
                        <option value="2751">멜란그레이</option>
                        
                        <option value="2752">소프트베이지</option>
                        
                        <option value="2761">체스트넛</option>
                        
                        <option value="2767">위드블루</option>
                        
                        <option value="2768">위드카본</option>
                        
                        <option value="2838">도브</option>
                        
                        <option value="2839">골드</option>
                        
                        <option value="2840">펀</option>
                        
                        <option value="2850">샌드 베이지</option>
                        
                        <option value="2857">그라나이트</option>
                        
                        <option value="2858">핑크버드</option>
                        
                        <option value="2859">포레스트</option>
                        
                        <option value="2860">세트</option>
                        
                        <option value="2866">다크네이비</option>
                        
                        <option value="3377">달리아 레드</option>
                        
                        <option value="3378">빅토리아 블루</option>
                        
                        <option value="3379">실버</option>
                        
                        <option value="3380">멜란 베이지</option>
                        
                        <option value="3381">멜란 네이비</option>
                        
                        <option value="3390">크림아이보리</option>
                        
                        <option value="3393">클래식 베이지</option>
                        
                        <option value="3396">샴페인</option>
                        
                        <option value="3397">오팔 그레이</option>
                        
                        <option value="3398">클래식 블루</option>
                        
                        <option value="3400">스카이 블루</option>
                        
                        <option value="3410">멜롯</option>
                        
                        <option value="3412">스테리 나이트</option>
                        
                        <option value="3413">알몬드</option>
                        
                        <option value="3414">로건</option>
                        
                        <option value="3415">파스텔 포레스트</option>
                        
                        <option value="3421">옥스포드</option>
                        
                        <option value="3422">팀버</option>
                        
                        <option value="3423">레몬</option>
                        
                        <option value="3430">오이스터</option>
                        
                        <option value="3433">쿼츠</option>
                        
                        <option value="3434">비스코티</option>
                        
                        <option value="3446">펄 실버</option>
                        
                        <option value="3448">퓨터</option>
                        
                        <option value="3449">파인</option>
                        
                        <option value="3461">모스</option>
                        
                        <option value="3463">브릭 레드</option>
                        
                        <option value="3466">타임</option>
                        
                        <option value="3467">포르치니</option>
                        
                        <option value="3473">프렌치 네이비</option>
                        
                        <option value="3475">아고라 스톰</option>
                        
                        <option value="3476">페이브먼트</option>
                        
                        <option value="3477">신더</option>
                        
                        <option value="3478">퍼시픽</option>
                        
                        <option value="3479">브라운 스트립</option>
                        
                        <option value="3480">이클립스</option>
                        
                        <option value="3481">레인보우</option>
                        
                        <option value="3491">드리프트우드</option>
                        
                        <option value="3492">스파이스</option>
                        
                        <option value="3495">에크루</option>
                        
                        <option value="3496">아보카도 그린</option>
                        
                        <option value="3497">멜란지 그레이</option>
                        
                        <option value="3498">멜론</option>
                        
                        <option value="3502">세이지 그린</option>
                        
                        <option value="3505">로즈</option>
                        
                        <option value="3520">브린들</option>
                        
                        <option value="3521">세이블</option>
                        
                        <option value="3525">오션</option>
                        
                        <option value="3522">초콜릿</option>
                        
                        <option value="3523">코냑</option>
                        
                        <option value="3531">셰일</option>
                        
                        <option value="3532">페블</option>
                        
                        <option value="3533">썬더</option>
                        
                        <option value="3534">니켈</option>
                        
                        <option value="3535">어비스</option>
                        
                        <option value="3536">트위그</option>
                        
                        <option value="3545">웜베이지</option>
                        
                        <option value="3546">웜아이보리</option>
                        
                        <option value="3554">라떼 베이지</option>
                        
                        <option value="3555">오트 베이지</option>
                        
                        <option value="3556">캔디 핑크</option>
                        
                        <option value="3557">시나몬 브라운</option>
                        
                        <option value="3565">샴페인 오트</option>
                        
                        <option value="3568">코지 베이지</option>
                        
                        <option value="3569">코지 그레이</option>
                        
                        <option value="3570">코지 민트</option>
                        
                        <option value="3572">아몬드 베이지</option>
                        
                        <option value="3573">모스 그린</option>
                        
                        <option value="3574">더스티 핑크</option>
                        
                        <option value="3580">오크</option>
                        
                        <option value="3581">토프 베이지</option>
                        
                        <option value="3590">멜론(블랙 에디션)</option>
                        
                        <option value="3592">블랙</option>
                        
                        <option value="3593">카키</option>
                        
                        <option value="3597">그레이</option>
                        
                        <option value="3607">포그 브라운</option>
                        
                        <option value="3608">토프</option>
                        
                        <option value="3609">애쉬 그린</option>
                        
                        <option value="3610">미스티 핑크</option>
                        
                        <option value="3611">티 그린</option>
                        
                        <option value="3613">헤리티지</option>
                        
                        <option value="3614">샌더슨</option>
                        
                        <option value="3615">엘레먼트</option>
                        
                        <option value="3616">그래핀</option>
                        
                        <option value="3617">미카</option>
                        
                        <option value="3620">폰</option>
                        
                        <option value="3621">오닉스</option>
                        
                        <option value="3622">멀</option>
                        
                        <option value="3629">메이플</option>
                        
                        <option value="3630">오트밀</option>
                        
                        <option value="3631">토프그레이</option>
                        
                        <option value="3632">딥 토프</option>
                        
                        <option value="3633">딥 토프(사용X)</option>
                        
                        <option value="3634">멜로우 골드</option>
                        
                        <option value="3635">스톤 베이지</option>
                        
                        <option value="3637">오션네이비</option>
                        
                        <option value="3641">공룡</option>
                        
                        <option value="3642">공룡(중복코드)</option>
                        
                        <option value="3649">샌드스톤</option>
                        
                        <option value="3650">인디고</option>
                        
                        <option value="3657">바닐라 아이보리</option>
                        
                        <option value="3665">사쿠라</option>
                        
                        <option value="3666">스카이</option>
                        
                        <option value="3669">라떼</option>
                        
                        <option value="3671">머쉬룸</option>
                        
                        <option value="3672">포그</option>
                        
                        <option value="3673">그레이셔</option>
                        
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="divTypeFilter" class="form-label">구분타입</label>
                    <select class="form-select" id="divTypeFilter" onchange="filterProducts()">
                        <option value="">전체</option>
                        
                        <option value="3749">일반</option>
                        
                        <option value="3750">특수</option>
                        
                        <option value="3751">한정</option>
                        
                        <option value="3752">이벤트</option>
                        
                        <option value="3753">기타</option>
                        
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="productCodeFilter" class="form-label">제품코드</label>
                    <select class="form-select" id="productCodeFilter" onchange="filterProducts()">
                        <option value="">전체</option>
                        
                        <option value="50">유모차</option>
                        
                        <option value="110">카시트</option>
                        
                        <option value="157">유아용가구</option>
                        
                        <option value="89">유모차용품</option>
                        
                        <option value="150">카시트용품</option>
                        
                        <option value="176">유아생활용품</option>
                        
                        <option value="181">잡화 및 기타</option>
                        
                        <option value="202">침구 및 소품</option>
                        
                        <option value="205">기타</option>
                        
                        <option value="207">배송/포장</option>
                        
                        <option value="2656">펫</option>
                        
                        <option value="3401">ACC</option>
                        
                        <option value="3435">펫용품</option>
                        
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="stdCodeFilter" class="form-label">자가코드</label>
                    <input type="text" class="form-control" id="stdCodeFilter" 
                           placeholder="자가코드 검색..." onkeyup="filterProducts()">
                </div>
            </div>
        </div>
    </div>

    <!-- 액션 버튼 영역 -->
    <div class="row mb-3">
        <div class="col-md-8">
            <button type="button" class="btn btn-primary me-2" onclick="openAddModal()">
                <i class="fas fa-plus me-1"></i>상품 등록
            </button>
            <button type="button" class="btn btn-success me-2" onclick="openExcelUploadModal()">
                <i class="fas fa-upload me-1"></i>엑셀 업로드
            </button>
            <button type="button" class="btn btn-excel me-2" onclick="downloadExcel()">
                <i class="fas fa-download me-1"></i>엑셀 다운로드
            </button>
            <button type="button" class="btn btn-info" onclick="syncWithErpia()">
                <i class="fas fa-sync-alt me-1"></i>ERPia 동기화
            </button>
        </div>
        <div class="col-md-4 text-end">
            <div class="btn-group" role="group">
                <input type="radio" class="btn-check" name="viewMode" id="gridView" autocomplete="off" checked>
                <label class="btn btn-outline-secondary" for="gridView">
                    <i class="fas fa-table me-1"></i>테이블
                </label>
                <input type="radio" class="btn-check" name="viewMode" id="cardView" autocomplete="off">
                <label class="btn btn-outline-secondary" for="cardView">
                    <i class="fas fa-th-large me-1"></i>카드
                </label>
            </div>
        </div>
    </div>

    <!-- 테이블 영역 -->
    <div class="card table-card" id="tableView">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
                <i class="fas fa-list me-2"></i>상품 목록
                <span class="badge bg-secondary ms-2" id="tableCount">0</span>
            </h5>
            <div class="btn-group btn-group-sm">
                <button type="button" class="btn btn-outline-primary" onclick="sortProducts('name')">
                    <i class="fas fa-sort-alpha-down me-1"></i>이름순
                </button>
                <button type="button" class="btn btn-outline-primary" onclick="sortProducts('created')">
                    <i class="fas fa-sort-numeric-down me-1"></i>등록순
                </button>
                <button type="button" class="btn btn-outline-primary" onclick="sortProducts('price')">
                    <i class="fas fa-sort-amount-down me-1"></i>가격순
                </button>
            </div>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-striped table-hover mb-0" id="productTable">
                    <thead class="table-light">
                        <tr>
                            <th onclick="sortTable(0)" style="width: 80px;">
                                번호 <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th onclick="sortTable(1)" style="width: 120px;">
                                회사 <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th onclick="sortTable(2)" style="width: 150px;">
                                브랜드 <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th onclick="sortTable(3)">
                                상품명 <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th onclick="sortTable(4)" style="width: 100px;">
                                품목 <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th onclick="sortTable(5)" style="width: 100px;">
                                타입 <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th onclick="sortTable(6)" style="width: 100px;">
                                년도 <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th onclick="sortTable(7)" style="width: 120px;">
                                상품가격(Tag) <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th onclick="sortTable(8)" style="width: 80px;">
                                상태 <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th onclick="sortTable(9)" style="width: 120px;">
                                등록일 <i class="bi bi-arrow-down-up"></i>
                            </th>
                            <th style="width: 120px;">액션</th>
                        </tr>
                    </thead>
                    <tbody id="productTableBody">
                        <!-- 동적으로 로드됨 -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- 카드 영역 (초기에는 숨김) -->
    <div class="row" id="cardView" style="display: none;">
        <div id="productCards">
            <!-- 동적으로 로드됨 -->
        </div>
    </div>

    <!-- 페이징 컨트롤 (새로 추가) -->
    <div class="row mt-4">
        <div class="col-12">
            <nav aria-label="상품 페이지네이션">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <small class="text-muted" id="pageInfo">
                            총 <span id="totalProducts">0</span>개 상품 (페이지 <span id="currentPageNum">1</span> / <span id="totalPages">1</span>)
                        </small>
                    </div>
                    <ul class="pagination pagination-sm mb-0" id="pagination">
                        <!-- 동적으로 생성됨 -->
                    </ul>
                    <div>
                        <select class="form-select form-select-sm" id="perPageSelect" style="width: auto;">
                            <option value="10">10개씩</option>
                            <option value="25">25개씩</option>
                            <option value="50" selected>50개씩</option>
                            <option value="100">100개씩</option>
                        </select>
                    </div>
                </div>
            </nav>
        </div>
    </div>

    <!-- 로딩 인디케이터 -->
    <div class="text-center my-5" id="loadingIndicator" style="display: none;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3">상품 정보를 불러오는 중...</p>
    </div>
</div>

<!-- 상품 등록/수정 모달 -->
<div class="modal fade" id="productModal" tabindex="-1" role="dialog" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="productModalLabel">상품 등록</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="productForm" enctype="multipart/form-data">
                <input type="hidden" id="productId" name="productId">
                <input type="hidden" id="isEditMode" value="false">
                
                <div class="modal-body">
                    <div class="container-fluid">
                        
                        <!-- 1단계: 기본 상품 정보 (레거시 호환) -->
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="company_id" class="form-label">회사</label>
                                    <select class="form-control" id="company_id" name="company_id" required>
                                        <option value="">선택</option>
                                        <option value="1" selected>에이원</option>
                                        <option value="2">에이원 월드</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="brand_code_seq" class="form-label">브랜드</label>
                                    <select class="form-control" id="brand_code_seq" name="brand_code_seq" required>
                                        <option value="">선택</option>
                                        
                                        <option value="2281" data-code="IC">아이캐리 (IC)</option>
                                        
                                        <option value="30" data-code="JI">JOIE (JI)</option>
                                        
                                        <option value="31" data-code="NN">NUNA (NN)</option>
                                        
                                        <option value="32" data-code="TT">TEAMTEX (TT)</option>
                                        
                                        <option value="33" data-code="LG">Le grove (LG)</option>
                                        
                                        <option value="34" data-code="PL">팔리 (PL)</option>
                                        
                                        <option value="35" data-code="MD">MOMPUSH (MD)</option>
                                        
                                        <option value="36" data-code="BM">베비모드 (BM)</option>
                                        
                                        <option value="37" data-code="SR">S.P.R (SR)</option>
                                        
                                        <option value="38" data-code="ZZ">기타 (ZZ)</option>
                                        
                                        <option value="2600" data-code="BL">비비러브 (BL)</option>
                                        
                                        <option value="2654" data-code="RP">리안펫 (RP)</option>
                                        
                                        <option value="3506" data-code="TV">타보 펫츠 (TV)</option>
                                        
                                        <option value="29" data-code="RY">RYAN (RY)</option>
                                        
                                        <option value="3780" data-code="BBLUV">BBLUV (BBLUV)</option>
                                        
                                        <option value="3781" data-code="i-carry">i-carry (i-carry)</option>
                                        
                                        <option value="3782" data-code="JOIE">JOIE (JOIE)</option>
                                        
                                        <option value="3783" data-code="Le grove">Le grove (Le grove)</option>
                                        
                                        <option value="3784" data-code="MOMPUSH">MOMPUSH (MOMPUSH)</option>
                                        
                                        <option value="3785" data-code="NUNA">NUNA (NUNA)</option>
                                        
                                        <option value="3786" data-code="PALI">PALI (PALI)</option>
                                        
                                        <option value="3787" data-code="RYAN">RYAN (RYAN)</option>
                                        
                                        <option value="3788" data-code="RYAN PET">RYAN PET (RYAN PET)</option>
                                        
                                        <option value="3789" data-code="TAVO PETS">TAVO PETS (TAVO PETS)</option>
                                        
                                        <option value="3790" data-code="TEAMTEX">TEAMTEX (TEAMTEX)</option>
                                        
                                        <option value="3791" data-code="기타">기타 (기타)</option>
                                        
                                        <option value="3854" data-code="NU">뉴나 (NU)</option>
                                        
                                        <option value="3855" data-code="LI">리안 (LI)</option>
                                        
                                        <option value="3856" data-code="JY">조이 (JY)</option>
                                        
                                        <option value="3857" data-code="FR">페라리 (FR)</option>
                                        
                                        <option value="3858" data-code="NA">나니아 (NA)</option>
                                        
                                        <option value="3859" data-code="FP">피셔프라이스 (FP)</option>
                                        
                                        <option value="3860" data-code="PP">페프 (PP)</option>
                                        
                                        <option value="3861" data-code="MI">미지정 (MI)</option>
                                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="prod_group_code_seq" class="form-label">품목</label>
                                    <select class="form-control" id="prod_group_code_seq" name="prod_group_code_seq" required>
                                        <option value="">선택</option>
                                        
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="prod_type_code_seq" class="form-label">타입</label>
                                    <select class="form-control" id="prod_type_code_seq" name="prod_type_code_seq" required>
                                        <option value="">선택</option>
                                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="product_name" class="form-label">상품명</label>
                                    <input type="text" class="form-control" id="product_name" name="product_name" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="year_code_seq" class="form-label">년식</label>
                                    <select class="form-control" id="year_code_seq" name="year_code_seq" required>
                                        <option value="">선택</option>
                                        
                                        <option value="3852" data-code="  ">  </option>
                                        
                                        <option value="3853" data-code="10">2010</option>
                                        
                                        <option value="220" data-code="11">2011</option>
                                        
                                        <option value="221" data-code="12">2012</option>
                                        
                                        <option value="222" data-code="13">2013</option>
                                        
                                        <option value="223" data-code="14">2014</option>
                                        
                                        <option value="224" data-code="15">2015</option>
                                        
                                        <option value="225" data-code="16">2016</option>
                                        
                                        <option value="226" data-code="17">2017</option>
                                        
                                        <option value="227" data-code="18">2018</option>
                                        
                                        <option value="228" data-code="19">2019</option>
                                        
                                        <option value="229" data-code="20">2020</option>
                                        
                                        <option value="2864" data-code="21">2021</option>
                                        
                                        <option value="3389" data-code="22">2022</option>
                                        
                                        <option value="3472" data-code="23">2023</option>
                                        
                                        <option value="3490" data-code="24">2024</option>
                                        
                                        <option value="3605" data-code="25">2025</option>
                                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="price" class="form-label">상품가격(Tag)</label>
                                    <input type="number" class="form-control" id="price" name="price" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="use_yn" class="form-label">사용여부</label>
                                    <select class="form-control" id="use_yn" name="use_yn" required>
                                        <option value="Y" selected>사용</option>
                                        <option value="N">미사용</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 히든 필드: 구분타입 "일반"으로 고정 -->
                        <input type="hidden" id="div_type_code_seq" name="div_type_code_seq" value="">
                        
                        <!-- 구분선 -->
                        <hr class="my-4">
                        
                        <!-- 2단계: 제품 모델 등록 -->
                        <div class="bg-primary text-white p-2 mb-3">
                            <h6 class="mb-0">제품 모델 등록</h6>
                        </div>
                        
                        <div id="productModelsContainer">
                            <div class="product-model-item border p-3 mb-3" data-index="0">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">제품명</label>
                                            <input type="text" class="form-control product-model-name" name="model_name[]" placeholder="제품명">
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="mb-3">
                                            <label class="form-label">제품코드</label>
                                            <select class="form-control product-code" name="product_code[]">
                                                <option value="">제품 코드</option>
                                                
                                                <option value="ST" data-code="ST">유모차 (ST)</option>
                                                
                                                <option value="CS" data-code="CS">카시트 (CS)</option>
                                                
                                                <option value="FT" data-code="FT">유아용가구 (FT)</option>
                                                
                                                <option value="SG" data-code="SG">유모차용품 (SG)</option>
                                                
                                                <option value="CG" data-code="CG">카시트용품 (CG)</option>
                                                
                                                <option value="FG" data-code="FG">유아생활용품 (FG)</option>
                                                
                                                <option value="TO" data-code="TO">잡화 및 기타 (TO)</option>
                                                
                                                <option value="AC" data-code="AC">침구 및 소품 (AC)</option>
                                                
                                                <option value="ZG" data-code="ZG">기타 (ZG)</option>
                                                
                                                <option value="BS" data-code="BS">배송/포장 (BS)</option>
                                                
                                                <option value="PE" data-code="PE">펫 (PE)</option>
                                                
                                                <option value="ACC" data-code="ACC">ACC (ACC)</option>
                                                
                                                <option value="PG" data-code="PG">펫용품 (PG)</option>
                                                
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="mb-3">
                                            <label class="form-label">타입</label>
                                            <select class="form-control prod-type2" name="prod_type2[]">
                                                <option value="">타입</option>
                                                
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="mb-3">
                                            <label class="form-label">색상</label>
                                            <select class="form-control product-color" name="product_color[]">
                                                <option value="">색상</option>
                                                
                                                <option value="PLG" data-code="PLG">G퍼플 (PLG)</option>
                                                
                                                <option value="GO0" data-code="GO0">G올리브 (GO0)</option>
                                                
                                                <option value="84N" data-code="84N">C나뚜르 (84N)</option>
                                                
                                                <option value="84P" data-code="84P">C나뚜르포인트 (84P)</option>
                                                
                                                <option value="81V" data-code="81V">C대빈드 (81V)</option>
                                                
                                                <option value="82D" data-code="82D">C대이크 (82D)</option>
                                                
                                                <option value="81N" data-code="81N">C빈드 (81N)</option>
                                                
                                                <option value="82P" data-code="82P">C빈드포인트 (82P)</option>
                                                
                                                <option value="83S" data-code="83S">C소빈드 (83S)</option>
                                                
                                                <option value="84S" data-code="84S">C소이크 (84S)</option>
                                                
                                                <option value="83A" data-code="83A">C이크A (83A)</option>
                                                
                                                <option value="86B" data-code="86B">C이크B (86B)</option>
                                                
                                                <option value="86W" data-code="86W">C이크W (86W)</option>
                                                
                                                <option value="85T" data-code="85T">C트레칸트 (85T)</option>
                                                
                                                <option value="85M" data-code="85M">C트레칸트M (85M)</option>
                                                
                                                <option value="96D" data-code="96D">DV나뚜르 (96D)</option>
                                                
                                                <option value="97D" data-code="97D">DV빈드 (97D)</option>
                                                
                                                <option value="99D" data-code="99D">DV이크 (99D)</option>
                                                
                                                <option value="98C" data-code="98C">DV트레칸트 (98C)</option>
                                                
                                                <option value="81R" data-code="81R">D나뚜르 (81R)</option>
                                                
                                                <option value="82N" data-code="82N">D빈드 (82N)</option>
                                                
                                                <option value="83D" data-code="83D">D이크 (83D)</option>
                                                
                                                <option value="90D" data-code="90D">D트레칸트 (90D)</option>
                                                
                                                <option value="AGY" data-code="AGY">애쉬 그레이 (AGY)</option>
                                                
                                                <option value="88P" data-code="88P">PE그레이 (88P)</option>
                                                
                                                <option value="83P" data-code="83P">PE나뚜루 (83P)</option>
                                                
                                                <option value="81P" data-code="81P">PE머스타드 (81P)</option>
                                                
                                                <option value="87P" data-code="87P">PE브라운 (87P)</option>
                                                
                                                <option value="82E" data-code="82E">PE블루 (82E)</option>
                                                
                                                <option value="84E" data-code="84E">PE옐로우 (84E)</option>
                                                
                                                <option value="84T" data-code="84T">PE트레칸트 (84T)</option>
                                                
                                                <option value="81I" data-code="81I">대아이보리 (81I)</option>
                                                
                                                <option value="83I" data-code="83I">소아이보리 (83I)</option>
                                                
                                                <option value="82I" data-code="82I">중아이보리 (82I)</option>
                                                
                                                <option value="AM" data-code="AM">PE민트 (AM)</option>
                                                
                                                <option value="BE1" data-code="BE1">애쉬 베이지 (BE1)</option>
                                                
                                                <option value="BEO" data-code="BEO">O베이지 (BEO)</option>
                                                
                                                <option value="BES" data-code="BES">S베이지 (BES)</option>
                                                
                                                <option value="BGN" data-code="BGN">G네이비 (BGN)</option>
                                                
                                                <option value="MTB" data-code="MTB">B멀티 (MTB)</option>
                                                
                                                <option value="LGB" data-code="LGB">B로브베이지 (LGB)</option>
                                                
                                                <option value="LBB" data-code="LBB">B로브블루 (LBB)</option>
                                                
                                                <option value="MNB" data-code="MNB">B모네 (MNB)</option>
                                                
                                                <option value="BBL" data-code="BBL">B블루 (BBL)</option>
                                                
                                                <option value="SCB" data-code="SCB">B스콜 (SCB)</option>
                                                
                                                <option value="EKB" data-code="EKB">B이크 (EKB)</option>
                                                
                                                <option value="LVC" data-code="LVC">C로브 (LVC)</option>
                                                
                                                <option value="MNC" data-code="MNC">C모네 (MNC)</option>
                                                
                                                <option value="WBC" data-code="WBC">C이크 (WBC)</option>
                                                
                                                <option value="BK2" data-code="BK2">G그레이 (BK2)</option>
                                                
                                                <option value="XGG" data-code="XGG">G그린 (XGG)</option>
                                                
                                                <option value="RDG" data-code="RDG">G레드 (RDG)</option>
                                                
                                                <option value="JPG" data-code="JPG">G민트 (JPG)</option>
                                                
                                                <option value="GRG" data-code="GRG">G베이지 (GRG)</option>
                                                
                                                <option value="GNG" data-code="GNG">G브라운 (GNG)</option>
                                                
                                                <option value="BKG" data-code="BKG">G블랙 (BKG)</option>
                                                
                                                <option value="BLG" data-code="BLG">G블루 (BLG)</option>
                                                
                                                <option value="YEG" data-code="YEG">G옐로우 (YEG)</option>
                                                
                                                <option value="ORG" data-code="ORG">G오렌지 (ORG)</option>
                                                
                                                <option value="KKG" data-code="KKG">G카키 (KKG)</option>
                                                
                                                <option value="LGS" data-code="LGS">럭스 그리스 (LGS)</option>
                                                
                                                <option value="MGG" data-code="MGG">G핑크 (MGG)</option>
                                                
                                                <option value="CSG" data-code="CSG">G화이트 (CSG)</option>
                                                
                                                <option value="CHM" data-code="CHM">M그레이 (CHM)</option>
                                                
                                                <option value="MEM" data-code="MEM">M레드 (MEM)</option>
                                                
                                                <option value="MSM" data-code="MSM">M머스터드 (MSM)</option>
                                                
                                                <option value="KKB" data-code="KKB">M베이지 (KKB)</option>
                                                
                                                <option value="BRM" data-code="BRM">M브라운 (BRM)</option>
                                                
                                                <option value="BKM" data-code="BKM">M블랙 (BKM)</option>
                                                
                                                <option value="GRM" data-code="GRM">M블루 (GRM)</option>
                                                
                                                <option value="ORM" data-code="ORM">M오렌지 (ORM)</option>
                                                
                                                <option value="KKM" data-code="KKM">M카키 (KKM)</option>
                                                
                                                <option value="GYO" data-code="GYO">O그레이 (GYO)</option>
                                                
                                                <option value="GNO" data-code="GNO">O그린 (GNO)</option>
                                                
                                                <option value="PLN" data-code="PLN">O네이비 (PLN)</option>
                                                
                                                <option value="PPO" data-code="PPO">O레드 (PPO)</option>
                                                
                                                <option value="UJO" data-code="UJO">O멀티 (UJO)</option>
                                                
                                                <option value="ERO" data-code="ERO">O민트 (ERO)</option>
                                                
                                                <option value="BRO" data-code="BRO">O브라운 (BRO)</option>
                                                
                                                <option value="EBO" data-code="EBO">O블랙 (EBO)</option>
                                                
                                                <option value="BLO" data-code="BLO">O블루 (BLO)</option>
                                                
                                                <option value="PLO" data-code="PLO">O퍼플 (PLO)</option>
                                                
                                                <option value="OPK" data-code="OPK">O핑크 (OPK)</option>
                                                
                                                <option value="WWO" data-code="WWO">O화이트 (WWO)</option>
                                                
                                                <option value="KBP" data-code="KBP">PE카키 (KBP)</option>
                                                
                                                <option value="XXS" data-code="XXS">스페이스 그레이 (XXS)</option>
                                                
                                                <option value="NVS" data-code="NVS">S네이비 (NVS)</option>
                                                
                                                <option value="SBS" data-code="SBS">S브라운 (SBS)</option>
                                                
                                                <option value="BKS" data-code="BKS">S블랙 (BKS)</option>
                                                
                                                <option value="XXW" data-code="XXW">S화이트 (XXW)</option>
                                                
                                                <option value="BKE" data-code="BKE">포기그레이 (BKE)</option>
                                                
                                                <option value="JDG" data-code="JDG">올리브 그린 (JDG)</option>
                                                
                                                <option value="X4Z" data-code="X4Z">기타 (X4Z)</option>
                                                
                                                <option value="ZZN" data-code="ZZN">미드 네이비 (ZZN)</option>
                                                
                                                <option value="WIR" data-code="WIR">레드 (WIR)</option>
                                                
                                                <option value="OWM" data-code="OWM">멀티 (OWM)</option>
                                                
                                                <option value="BRN" data-code="BRN">코코아브라운 (BRN)</option>
                                                
                                                <option value="BKB" data-code="BKB">캐비어 블랙 (BKB)</option>
                                                
                                                <option value="DNB" data-code="DNB">윈드 블루 (DNB)</option>
                                                
                                                <option value="ORO" data-code="ORO">오렌지 (ORO)</option>
                                                
                                                <option value="PLP" data-code="PLP">퍼플 (PLP)</option>
                                                
                                                <option value="PKP" data-code="PKP">핑크 (PKP)</option>
                                                
                                                <option value="WTW" data-code="WTW">화이트 (WTW)</option>
                                                
                                                <option value="JET" data-code="JET">제트 (JET)</option>
                                                
                                                <option value="CDR" data-code="CDR">시더 (CDR)</option>
                                                
                                                <option value="DBR" data-code="DBR">다크 베리 (DBR)</option>
                                                
                                                <option value="RCB" data-code="RCB">리치 브라운 (RCB)</option>
                                                
                                                <option value="A22" data-code="A22">모던 그레이 (A22)</option>
                                                
                                                <option value="A23" data-code="A23">스틸 그레이 (A23)</option>
                                                
                                                <option value="A24" data-code="A24">딥 그레이 (A24)</option>
                                                
                                                <option value="A25" data-code="A25">페일 그레이 (A25)</option>
                                                
                                                <option value="A17" data-code="A17">브라이트 그레이 (A17)</option>
                                                
                                                <option value="A16" data-code="A16">다크 그레이 (A16)</option>
                                                
                                                <option value="A20" data-code="A20">페티드시티 (A20)</option>
                                                
                                                <option value="A21" data-code="A21">도츠 (A21)</option>
                                                
                                                <option value="CAV" data-code="CAV">카본 (CAV)</option>
                                                
                                                <option value="SLT" data-code="SLT">슬레이트 (SLT)</option>
                                                
                                                <option value="A26" data-code="A26">엠버 (A26)</option>
                                                
                                                <option value="CVR" data-code="CVR">캐비어 블랙 (CVR)</option>
                                                
                                                <option value="NNT" data-code="NNT">나이트 (NNT)</option>
                                                
                                                <option value="DPW" data-code="DPW">다크퓨터 (DPW)</option>
                                                
                                                <option value="CRB" data-code="CRB">크랜베리 (CRB)</option>
                                                
                                                <option value="COL" data-code="COL">코랄 (COL)</option>
                                                
                                                <option value="RBK" data-code="RBK">로얄블랙 (RBK)</option>
                                                
                                                <option value="SDW" data-code="SDW">럭스 쉐도우 (SDW)</option>
                                                
                                                <option value="RWR" data-code="RWR">느와르 (RWR)</option>
                                                
                                                <option value="NRZ" data-code="NRZ">럭스 루즈 (NRZ)</option>
                                                
                                                <option value="MTL" data-code="MTL">마틸레 (MTL)</option>
                                                
                                                <option value="GRS" data-code="GRS">그리스 (GRS)</option>
                                                
                                                <option value="GRR" data-code="GRR">그로세일레 (GRR)</option>
                                                
                                                <option value="GTA" data-code="GTA">기타 (GTA)</option>
                                                
                                                <option value="RPS" data-code="RPS">프로스트 (RPS)</option>
                                                
                                                <option value="ASP" data-code="ASP">아스펜 (ASP)</option>
                                                
                                                <option value="A15" data-code="A15">캐비어 (A15)</option>
                                                
                                                <option value="SL0" data-code="SL0">미드나잇 그레이 (SL0)</option>
                                                
                                                <option value="PG0" data-code="PG0">매트 블랙 (PG0)</option>
                                                
                                                <option value="ABC" data-code="ABC">알파벳 (ABC)</option>
                                                
                                                <option value="MSB" data-code="MSB">미스티 그레이 (MSB)</option>
                                                
                                                <option value="SDB" data-code="SDB">샌디 브라운 (SDB)</option>
                                                
                                                <option value="DSB" data-code="DSB">더스크 블루 (DSB)</option>
                                                
                                                <option value="CLM" data-code="CLM">클라우드 민트 (CLM)</option>
                                                
                                                <option value="CNG" data-code="CNG">캐슈넛 그레이 (CNG)</option>
                                                
                                                <option value="CLB" data-code="CLB">클라우드 블루 (CLB)</option>
                                                
                                                <option value="SKB" data-code="SKB">시크 블랙 (SKB)</option>
                                                
                                                <option value="NTG" data-code="NTG">내추럴 그레이 (NTG)</option>
                                                
                                                <option value="CEF" data-code="CEF">커피 (CEF)</option>
                                                
                                                <option value="GRC" data-code="GRC">그레이 (GRC)</option>
                                                
                                                <option value="STN" data-code="STN">스톤 (STN)</option>
                                                
                                                <option value="SGR" data-code="SGR">실버 그레이 (SGR)</option>
                                                
                                                <option value="MSP" data-code="MSP">미스틱 퍼플 (MSP)</option>
                                                
                                                <option value="CCB" data-code="CCB">차콜 블랙 (CCB)</option>
                                                
                                                <option value="EVN" data-code="EVN">EBONY (EVN)</option>
                                                
                                                <option value="RVB" data-code="RVB">레이번 블랙 (RVB)</option>
                                                
                                                <option value="ALG" data-code="ALG">앨로이 그레이 (ALG)</option>
                                                
                                                <option value="STB" data-code="STB">스톤 블루 (STB)</option>
                                                
                                                <option value="RDS" data-code="RDS">봉쥬르 레드 (RDS)</option>
                                                
                                                <option value="BLS" data-code="BLS">봉쥬르 블루 (BLS)</option>
                                                
                                                <option value="SFR" data-code="SFR">사파리 (SFR)</option>
                                                
                                                <option value="A13" data-code="A13">M핑크 (A13)</option>
                                                
                                                <option value="GRF" data-code="GRF">그라파이트 (GRF)</option>
                                                
                                                <option value="LAK" data-code="LAK">레이크 (LAK)</option>
                                                
                                                <option value="BCI" data-code="BCI">버치 (BCI)</option>
                                                
                                                <option value="CHL" data-code="CHL">체리 (CHL)</option>
                                                
                                                <option value="COR" data-code="COR">코알 (COR)</option>
                                                
                                                <option value="A18" data-code="A18">네이비블레이저 (A18)</option>
                                                
                                                <option value="FSF" data-code="FSF">플라워스포에버 (FSF)</option>
                                                
                                                <option value="LIL" data-code="LIL">라일락 (LIL)</option>
                                                
                                                <option value="DSE" data-code="DSE">딥시 (DSE)</option>
                                                
                                                <option value="OXF" data-code="OXF">옥스포드 (OXF)</option>
                                                
                                                <option value="NPL" data-code="NPL">플럼 (NPL)</option>
                                                
                                                <option value="CSU" data-code="CSU">캐슈 (CSU)</option>
                                                
                                                <option value="CGR" data-code="CGR">크리스탈 그레이 (CGR)</option>
                                                
                                                <option value="FRB" data-code="FRB">프렌치 블루 (FRB)</option>
                                                
                                                <option value="LSB" data-code="LSB">럭스 블루 (LSB)</option>
                                                
                                                <option value="LSR" data-code="LSR">럭스 루즈 (LSR)</option>
                                                
                                                <option value="DRG" data-code="DRG">다람쥐 (DRG)</option>
                                                
                                                <option value="FOX" data-code="FOX">여우 (FOX)</option>
                                                
                                                <option value="FLW" data-code="FLW">꽃 (FLW)</option>
                                                
                                                <option value="RGR" data-code="RGR">리치 그레이 (RGR)</option>
                                                
                                                <option value="AQA" data-code="AQA">아쿠아 (AQA)</option>
                                                
                                                <option value="LAM" data-code="LAM">라임 (LAM)</option>
                                                
                                                <option value="ANP" data-code="ANP">아울&amp;폭스 (ANP)</option>
                                                
                                                <option value="HNR" data-code="HNR">헤지호그&amp;라쿤 (HNR)</option>
                                                
                                                <option value="PIC" data-code="PIC">피크 (PIC)</option>
                                                
                                                <option value="DGR" data-code="DGR">도트 그레이 (DGR)</option>
                                                
                                                <option value="GRB" data-code="GRB">그레이시 블루 (GRB)</option>
                                                
                                                <option value="MKB" data-code="MKB">밀크 베이지 (MKB)</option>
                                                
                                                <option value="MBK" data-code="MBK">미스틱블랙 (MBK)</option>
                                                
                                                <option value="ABG" data-code="ABG">어반그레이 (ABG)</option>
                                                
                                                <option value="SNB" data-code="SNB">샌디 블루 (SNB)</option>
                                                
                                                <option value="CAC" data-code="CAC">차콜 (CAC)</option>
                                                
                                                <option value="GFN" data-code="GFN">그레이 플라넬 (GFN)</option>
                                                
                                                <option value="MNV" data-code="MNV">마린 네이비 (MNV)</option>
                                                
                                                <option value="STG" data-code="STG">스톤 그레이 (STG)</option>
                                                
                                                <option value="SHG" data-code="SHG">샤이니그레이 (SHG)</option>
                                                
                                                <option value="XXB" data-code="XXB">스페이스블랙 (XXB)</option>
                                                
                                                <option value="PVC" data-code="PVC">투명 PVC (PVC)</option>
                                                
                                                <option value="TRD" data-code="TRD">트레디드 (TRD)</option>
                                                
                                                <option value="CBG" data-code="CBG">크림 베이지 (CBG)</option>
                                                
                                                <option value="CBL" data-code="CBL">시크 블루 (CBL)</option>
                                                
                                                <option value="CGY" data-code="CGY">시크 그레이 (CGY)</option>
                                                
                                                <option value="DBK" data-code="DBK">더블블랙 (DBK)</option>
                                                
                                                <option value="JBK" data-code="JBK">잭블랙 (JBK)</option>
                                                
                                                <option value="MGY" data-code="MGY">멜란그레이 (MGY)</option>
                                                
                                                <option value="SBG" data-code="SBG">소프트베이지 (SBG)</option>
                                                
                                                <option value="CST" data-code="CST">체스트넛 (CST)</option>
                                                
                                                <option value="WBL" data-code="WBL">위드블루 (WBL)</option>
                                                
                                                <option value="WCB" data-code="WCB">위드카본 (WCB)</option>
                                                
                                                <option value="DOV" data-code="DOV">도브 (DOV)</option>
                                                
                                                <option value="GLD" data-code="GLD">골드 (GLD)</option>
                                                
                                                <option value="FRN" data-code="FRN">펀 (FRN)</option>
                                                
                                                <option value="EBG" data-code="EBG">샌드 베이지 (EBG)</option>
                                                
                                                <option value="GNT" data-code="GNT">그라나이트 (GNT)</option>
                                                
                                                <option value="PBD" data-code="PBD">핑크버드 (PBD)</option>
                                                
                                                <option value="FRT" data-code="FRT">포레스트 (FRT)</option>
                                                
                                                <option value="SET" data-code="SET">세트 (SET)</option>
                                                
                                                <option value="DNV" data-code="DNV">다크네이비 (DNV)</option>
                                                
                                                <option value="DRD" data-code="DRD">달리아 레드 (DRD)</option>
                                                
                                                <option value="VBL" data-code="VBL">빅토리아 블루 (VBL)</option>
                                                
                                                <option value="SLV" data-code="SLV">실버 (SLV)</option>
                                                
                                                <option value="MBG" data-code="MBG">멜란 베이지 (MBG)</option>
                                                
                                                <option value="LNV" data-code="LNV">멜란 네이비 (LNV)</option>
                                                
                                                <option value="CIV" data-code="CIV">크림아이보리 (CIV)</option>
                                                
                                                <option value="BE1" data-code="BE1">클래식 베이지 (BE1)</option>
                                                
                                                <option value="CHP" data-code="CHP">샴페인 (CHP)</option>
                                                
                                                <option value="OGR" data-code="OGR">오팔 그레이 (OGR)</option>
                                                
                                                <option value="LBL" data-code="LBL">클래식 블루 (LBL)</option>
                                                
                                                <option value="SBL" data-code="SBL">스카이 블루 (SBL)</option>
                                                
                                                <option value="A19" data-code="A19">멜롯 (A19)</option>
                                                
                                                <option value="STN" data-code="STN">스테리 나이트 (STN)</option>
                                                
                                                <option value="AMD" data-code="AMD">알몬드 (AMD)</option>
                                                
                                                <option value="LOG" data-code="LOG">로건 (LOG)</option>
                                                
                                                <option value="PAF" data-code="PAF">파스텔 포레스트 (PAF)</option>
                                                
                                                <option value="OXF" data-code="OXF">옥스포드 (OXF)</option>
                                                
                                                <option value="TMB" data-code="TMB">팀버 (TMB)</option>
                                                
                                                <option value="LMN" data-code="LMN">레몬 (LMN)</option>
                                                
                                                <option value="OST" data-code="OST">오이스터 (OST)</option>
                                                
                                                <option value="QTZ" data-code="QTZ">쿼츠 (QTZ)</option>
                                                
                                                <option value="BCT" data-code="BCT">비스코티 (BCT)</option>
                                                
                                                <option value="PSV" data-code="PSV">펄 실버 (PSV)</option>
                                                
                                                <option value="OPW" data-code="OPW">퓨터 (OPW)</option>
                                                
                                                <option value="PIN" data-code="PIN">파인 (PIN)</option>
                                                
                                                <option value="MSS" data-code="MSS">모스 (MSS)</option>
                                                
                                                <option value="BRD" data-code="BRD">브릭 레드 (BRD)</option>
                                                
                                                <option value="THM" data-code="THM">타임 (THM)</option>
                                                
                                                <option value="PCN" data-code="PCN">포르치니 (PCN)</option>
                                                
                                                <option value="FNV" data-code="FNV">프렌치 네이비 (FNV)</option>
                                                
                                                <option value="A11" data-code="A11">아고라 스톰 (A11)</option>
                                                
                                                <option value="A12" data-code="A12">페이브먼트 (A12)</option>
                                                
                                                <option value="A14" data-code="A14">신더 (A14)</option>
                                                
                                                <option value="PCF" data-code="PCF">퍼시픽 (PCF)</option>
                                                
                                                <option value="BRS" data-code="BRS">브라운 스트립 (BRS)</option>
                                                
                                                <option value="ECL" data-code="ECL">이클립스 (ECL)</option>
                                                
                                                <option value="RBW" data-code="RBW">레인보우 (RBW)</option>
                                                
                                                <option value="DFW" data-code="DFW">드리프트우드 (DFW)</option>
                                                
                                                <option value="SPC" data-code="SPC">스파이스 (SPC)</option>
                                                
                                                <option value="ECR" data-code="ECR">에크루 (ECR)</option>
                                                
                                                <option value="AVG" data-code="AVG">아보카도 그린 (AVG)</option>
                                                
                                                <option value="MGY" data-code="MGY">멜란지 그레이 (MGY)</option>
                                                
                                                <option value="MEL" data-code="MEL">멜론 (MEL)</option>
                                                
                                                <option value="SAG" data-code="SAG">세이지 그린 (SAG)</option>
                                                
                                                <option value="ROS" data-code="ROS">로즈 (ROS)</option>
                                                
                                                <option value="BDL" data-code="BDL">브린들 (BDL)</option>
                                                
                                                <option value="SAB" data-code="SAB">세이블 (SAB)</option>
                                                
                                                <option value="OCN" data-code="OCN">오션 (OCN)</option>
                                                
                                                <option value="CCL" data-code="CCL">초콜릿 (CCL)</option>
                                                
                                                <option value="CNC" data-code="CNC">코냑 (CNC)</option>
                                                
                                                <option value="SHL" data-code="SHL">셰일 (SHL)</option>
                                                
                                                <option value="PBL" data-code="PBL">페블 (PBL)</option>
                                                
                                                <option value="THN" data-code="THN">썬더 (THN)</option>
                                                
                                                <option value="NKL" data-code="NKL">니켈 (NKL)</option>
                                                
                                                <option value="ABS" data-code="ABS">어비스 (ABS)</option>
                                                
                                                <option value="TWG" data-code="TWG">트위그 (TWG)</option>
                                                
                                                <option value="WBG" data-code="WBG">웜베이지 (WBG)</option>
                                                
                                                <option value="WIV" data-code="WIV">웜아이보리 (WIV)</option>
                                                
                                                <option value="LBG" data-code="LBG">라떼 베이지 (LBG)</option>
                                                
                                                <option value="OBG" data-code="OBG">오트 베이지 (OBG)</option>
                                                
                                                <option value="CPK" data-code="CPK">캔디 핑크 (CPK)</option>
                                                
                                                <option value="CBW" data-code="CBW">시나몬 브라운 (CBW)</option>
                                                
                                                <option value="CHO" data-code="CHO">샴페인 오트 (CHO)</option>
                                                
                                                <option value="CBE" data-code="CBE">코지 베이지 (CBE)</option>
                                                
                                                <option value="CZG" data-code="CZG">코지 그레이 (CZG)</option>
                                                
                                                <option value="CMT" data-code="CMT">코지 민트 (CMT)</option>
                                                
                                                <option value="ABE" data-code="ABE">아몬드 베이지 (ABE)</option>
                                                
                                                <option value="MGR" data-code="MGR">모스 그린 (MGR)</option>
                                                
                                                <option value="DPK" data-code="DPK">더스티 핑크 (DPK)</option>
                                                
                                                <option value="OAK" data-code="OAK">오크 (OAK)</option>
                                                
                                                <option value="TBG" data-code="TBG">토프 베이지 (TBG)</option>
                                                
                                                <option value="BME" data-code="BME">멜론(블랙 에디션) (BME)</option>
                                                
                                                <option value="BLK" data-code="BLK">블랙 (BLK)</option>
                                                
                                                <option value="KAK" data-code="KAK">카키 (KAK)</option>
                                                
                                                <option value="GLY" data-code="GLY">그레이 (GLY)</option>
                                                
                                                <option value="FGB" data-code="FGB">포그 브라운 (FGB)</option>
                                                
                                                <option value="TUP" data-code="TUP">토프 (TUP)</option>
                                                
                                                <option value="ASG" data-code="ASG">애쉬 그린 (ASG)</option>
                                                
                                                <option value="MPK" data-code="MPK">미스티 핑크 (MPK)</option>
                                                
                                                <option value="TGR" data-code="TGR">티 그린 (TGR)</option>
                                                
                                                <option value="HRI" data-code="HRI">헤리티지 (HRI)</option>
                                                
                                                <option value="SAN" data-code="SAN">샌더슨 (SAN)</option>
                                                
                                                <option value="ELM" data-code="ELM">엘레먼트 (ELM)</option>
                                                
                                                <option value="GRA" data-code="GRA">그래핀 (GRA)</option>
                                                
                                                <option value="MIC" data-code="MIC">미카 (MIC)</option>
                                                
                                                <option value="FAW" data-code="FAW">폰 (FAW)</option>
                                                
                                                <option value="ONX" data-code="ONX">오닉스 (ONX)</option>
                                                
                                                <option value="MRL" data-code="MRL">멀 (MRL)</option>
                                                
                                                <option value="MPL" data-code="MPL">메이플 (MPL)</option>
                                                
                                                <option value="OTM" data-code="OTM">오트밀 (OTM)</option>
                                                
                                                <option value="TPG" data-code="TPG">토프그레이 (TPG)</option>
                                                
                                                <option value="DTP" data-code="DTP">딥 토프 (DTP)</option>
                                                
                                                <option value="DTP" data-code="DTP">딥 토프(사용X) (DTP)</option>
                                                
                                                <option value="MLG" data-code="MLG">멜로우 골드 (MLG)</option>
                                                
                                                <option value="STE" data-code="STE">스톤 베이지 (STE)</option>
                                                
                                                <option value="ONV" data-code="ONV">오션네이비 (ONV)</option>
                                                
                                                <option value="DIN" data-code="DIN">공룡 (DIN)</option>
                                                
                                                <option value="DIN" data-code="DIN">공룡(중복코드) (DIN)</option>
                                                
                                                <option value="SAS" data-code="SAS">샌드스톤 (SAS)</option>
                                                
                                                <option value="IND" data-code="IND">인디고 (IND)</option>
                                                
                                                <option value="BIV" data-code="BIV">바닐라 아이보리 (BIV)</option>
                                                
                                                <option value="SAK" data-code="SAK">사쿠라 (SAK)</option>
                                                
                                                <option value="SKY" data-code="SKY">스카이 (SKY)</option>
                                                
                                                <option value="LTT" data-code="LTT">라떼 (LTT)</option>
                                                
                                                <option value="MUR" data-code="MUR">머쉬룸 (MUR)</option>
                                                
                                                <option value="FOG" data-code="FOG">포그 (FOG)</option>
                                                
                                                <option value="GLA" data-code="GLA">그레이셔 (GLA)</option>
                                                
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="mb-3">
                                            <label class="form-label">자사코드</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control std-product-code" name="std_product_code[]" placeholder="분류화 표준코드" readonly>
                                                <button type="button" class="btn btn-primary btn-generate-code">자동생성</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-10"></div>
                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-sm btn-success btn-add-model me-2">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                        <button type="button" class="btn btn-sm btn-danger btn-remove-model">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 추가 정보 (선택사항) -->
                        <hr class="my-4">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label for="description" class="form-label">설명</label>
                                    <textarea class="form-control" id="description" name="description" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                    <button type="submit" class="btn btn-primary" id="saveProductBtn">저장</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 상품 상세보기 모달 -->
<div class="modal fade" id="productDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-info text-white">
                <h5 class="modal-title">
                    <i class="fas fa-eye me-2"></i>상품 상세정보
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="productDetailContent">
                <!-- 동적으로 로드됨 -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="editProductFromDetail()">
                    <i class="fas fa-edit me-1"></i>수정
                </button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-1"></i>닫기
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 엑셀 업로드 모달 -->
<div class="modal fade" id="excelUploadModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title">
                    <i class="fas fa-upload me-2"></i>엑셀 일괄 업로드
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="excelFile" class="form-label">엑셀 파일 선택</label>
                    <input type="file" class="form-control" id="excelFile" accept=".xlsx,.xls">
                    <div class="form-text">
                        <i class="fas fa-info-circle me-1"></i>
                        .xlsx 또는 .xls 파일만 업로드 가능합니다
                    </div>
                </div>
                <div class="mb-3">
                    <a href="/product/api/download-template" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-download me-1"></i>업로드 템플릿 다운로드
                    </a>
                </div>
                <div id="uploadProgress" style="display: none;">
                    <div class="progress mb-3">
                        <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                    </div>
                    <p class="text-center">업로드 중...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                <button type="button" class="btn btn-success" onclick="uploadExcel()">
                    <i class="fas fa-upload me-1"></i>업로드
                </button>
            </div>
        </div>
    </div>
</div>

        </main>
    </div>

    <!-- 커스텀 JavaScript -->
    <script>
        // 전역 JavaScript 함수들
        
        // 로그아웃 확인
        function confirmLogout() {
            return confirm('정말 로그아웃하시겠습니까?');
        }
        
        // 회사 전환 함수
        function switchCompany(companyId) {
            fetch('/api/switch-company', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({company_id: companyId})
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // 회사 전환 완료 이벤트 발생
                    $(window).trigger('companyChanged');
                    // 페이지 새로고침으로 UI 업데이트
                    location.reload();
                } else {
                    alert('회사 전환에 실패했습니다: ' + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('회사 전환 중 오류가 발생했습니다.');
            });
        }
        
        // 페이지 로드 시 실행
        $(document).ready(function() {
            // DataTables 기본 설정
            if ($.fn.DataTable) {
                $.extend(true, $.fn.dataTable.defaults, {
                    language: {
                        url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/ko.json'
                    },
                    responsive: true,
                    pageLength: 25,
                    lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "전체"]],
                    dom: '<"row"<"col-sm-6"l><"col-sm-6"f>>rtip'
                });
            }
        });
    </script>
    
    
<!-- DataTables JS -->
<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
<!-- Bootstrap Select JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/i18n/defaults-ko_KR.min.js"></script>

<script>
// 전역 변수
let products = [];
let filteredProducts = [];
let currentProductId = null;

// 페이징 변수 (새로 추가)
let currentPage = 1;
let perPage = 50;
let totalProducts = 0;
let totalPages = 1;
let isLoading = false;

// 정렬 변수 (새로 추가)
let currentSort = {
    column: 'created_at',
    direction: 'desc'
};

$(document).ready(function() {
    console.log('상품 관리 시스템 초기화');
    loadProducts();
    setupEventHandlers();
    initializeDivType();
});

// 구분타입을 "일반"으로 기본 설정
function initializeDivType() {
    // 구분타입 코드 중에서 "일반"에 해당하는 값을 찾아서 설정
    const divTypeSelect = document.getElementById('div_type_code_seq');
    // 구분타입은 일반적으로 첫 번째 값 또는 "1"로 설정
    const divTypeOptions = $('#div_type_code_seq option');
    if (divTypeOptions.length > 1) {
        divTypeSelect.value = divTypeOptions.eq(1).val(); // 첫 번째 옵션은 공백이므로 두 번째 선택
    }
}

// 이벤트 핸들러 설정
function setupEventHandlers() {
    // 자가코드 자동생성 버튼
    $(document).on('click', '.btn-generate-code', function() {
        generateProductCode(this);
    });

    // 제품모델 추가 버튼
    $(document).on('click', '.btn-add-model', function() {
        addProductModelRow();
    });

    // 제품모델 삭제 버튼
    $(document).on('click', '.btn-remove-model', function() {
        removeProductModelRow(this);
    });

    // 폼 제출
    $('#productForm').on('submit', function(e) {
        e.preventDefault();
        saveProduct();
    });
}

// 레거시 방식 자가코드 생성 (16자리)
function generateProductCode(button) {
    const modelItem = $(button).closest('.product-model-item');
    
    // 기본 코드들 (1단계에서 정의)
    const brandCode = $('#brand_code_seq option:selected').data('code') || '';
    const divTypeCode = '1'; // 일반으로 고정
    const prodGroupCode = $('#prod_group_code_seq option:selected').data('code') || '';
    const prodTypeCode = $('#prod_type_code_seq option:selected').data('code') || '';
    const yearCode = $('#year_code_seq option:selected').data('code') || '';
    
    // 제품모델별 코드들 (2단계에서 선택)
    const productCode = modelItem.find('.product-code option:selected').data('code') || '';
    const prodType2Code = modelItem.find('.prod-type2 option:selected').data('code') || '';
    const colorCode = modelItem.find('.product-color option:selected').data('code') || '';

    // 유효성 검사
    if (!brandCode) {
        alert('브랜드를 선택하세요.');
        $('#brand_code_seq').focus();
        return false;
    }
    if (!prodGroupCode) {
        alert('품목을 선택하세요.');
        $('#prod_group_code_seq').focus();
        return false;
    }
    if (!prodTypeCode) {
        alert('타입을 선택하세요.');
        $('#prod_type_code_seq').focus();
        return false;
    }
    if (!yearCode) {
        alert('년식을 선택하세요.');
        $('#year_code_seq').focus();
        return false;
    }
    if (!productCode) {
        alert('제품코드를 선택하세요.');
        modelItem.find('.product-code').focus();
        return false;
    }
    if (!prodType2Code) {
        alert('타입을 선택하세요.');
        modelItem.find('.prod-type2').focus();
        return false;
    }
    if (!colorCode) {
        alert('색상을 선택하세요.');
        modelItem.find('.product-color').focus();
        return false;
    }

    // 16자리 자가코드 조합 (레거시 방식)
    const stdCode = brandCode.padEnd(2, '0').substring(0, 2) +
                   divTypeCode.substring(0, 1) +
                   prodGroupCode.padEnd(2, '0').substring(0, 2) +
                   prodTypeCode.padEnd(2, '0').substring(0, 2) +
                   productCode.padEnd(2, '0').substring(0, 2) +
                   prodType2Code.padEnd(2, '0').substring(0, 2) +
                   yearCode.substring(0, 2) +
                   colorCode.padEnd(3, '0').substring(0, 3);

    // 생성된 코드를 입력 필드에 설정
    modelItem.find('.std-product-code').val(stdCode);
    
    console.log('자가코드 생성:', stdCode);
    console.log('구성:', {
        brand: brandCode,
        divType: divTypeCode,
        prodGroup: prodGroupCode,
        prodType: prodTypeCode,
        productCode: productCode,
        prodType2: prodType2Code,
        year: yearCode,
        color: colorCode
    });
}

// 제품모델 행 추가
function addProductModelRow() {
    const container = $('#productModelsContainer');
    const currentCount = container.find('.product-model-item').length;
    const newIndex = currentCount;
    
    const newRow = `
        <div class="product-model-item border p-3 mb-3" data-index="${newIndex}">
            <div class="row">
                <div class="col-md-4">
                    <div class="mb-3">
                        <label class="form-label">제품명</label>
                        <input type="text" class="form-control product-model-name" name="model_name[]" placeholder="제품명">
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="mb-3">
                        <label class="form-label">제품코드</label>
                        <select class="form-control product-code" name="product_code[]">
                            <option value="">제품 코드</option>
                            
                            <option value="ST" data-code="ST">유모차 (ST)</option>
                            
                            <option value="CS" data-code="CS">카시트 (CS)</option>
                            
                            <option value="FT" data-code="FT">유아용가구 (FT)</option>
                            
                            <option value="SG" data-code="SG">유모차용품 (SG)</option>
                            
                            <option value="CG" data-code="CG">카시트용품 (CG)</option>
                            
                            <option value="FG" data-code="FG">유아생활용품 (FG)</option>
                            
                            <option value="TO" data-code="TO">잡화 및 기타 (TO)</option>
                            
                            <option value="AC" data-code="AC">침구 및 소품 (AC)</option>
                            
                            <option value="ZG" data-code="ZG">기타 (ZG)</option>
                            
                            <option value="BS" data-code="BS">배송/포장 (BS)</option>
                            
                            <option value="PE" data-code="PE">펫 (PE)</option>
                            
                            <option value="ACC" data-code="ACC">ACC (ACC)</option>
                            
                            <option value="PG" data-code="PG">펫용품 (PG)</option>
                            
                        </select>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="mb-3">
                        <label class="form-label">타입</label>
                        <select class="form-control prod-type2" name="prod_type2[]">
                            <option value="">타입</option>
                            
                        </select>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="mb-3">
                        <label class="form-label">색상</label>
                        <select class="form-control product-color" name="product_color[]">
                            <option value="">색상</option>
                            
                            <option value="PLG" data-code="PLG">G퍼플 (PLG)</option>
                            
                            <option value="GO0" data-code="GO0">G올리브 (GO0)</option>
                            
                            <option value="84N" data-code="84N">C나뚜르 (84N)</option>
                            
                            <option value="84P" data-code="84P">C나뚜르포인트 (84P)</option>
                            
                            <option value="81V" data-code="81V">C대빈드 (81V)</option>
                            
                            <option value="82D" data-code="82D">C대이크 (82D)</option>
                            
                            <option value="81N" data-code="81N">C빈드 (81N)</option>
                            
                            <option value="82P" data-code="82P">C빈드포인트 (82P)</option>
                            
                            <option value="83S" data-code="83S">C소빈드 (83S)</option>
                            
                            <option value="84S" data-code="84S">C소이크 (84S)</option>
                            
                            <option value="83A" data-code="83A">C이크A (83A)</option>
                            
                            <option value="86B" data-code="86B">C이크B (86B)</option>
                            
                            <option value="86W" data-code="86W">C이크W (86W)</option>
                            
                            <option value="85T" data-code="85T">C트레칸트 (85T)</option>
                            
                            <option value="85M" data-code="85M">C트레칸트M (85M)</option>
                            
                            <option value="96D" data-code="96D">DV나뚜르 (96D)</option>
                            
                            <option value="97D" data-code="97D">DV빈드 (97D)</option>
                            
                            <option value="99D" data-code="99D">DV이크 (99D)</option>
                            
                            <option value="98C" data-code="98C">DV트레칸트 (98C)</option>
                            
                            <option value="81R" data-code="81R">D나뚜르 (81R)</option>
                            
                            <option value="82N" data-code="82N">D빈드 (82N)</option>
                            
                            <option value="83D" data-code="83D">D이크 (83D)</option>
                            
                            <option value="90D" data-code="90D">D트레칸트 (90D)</option>
                            
                            <option value="AGY" data-code="AGY">애쉬 그레이 (AGY)</option>
                            
                            <option value="88P" data-code="88P">PE그레이 (88P)</option>
                            
                            <option value="83P" data-code="83P">PE나뚜루 (83P)</option>
                            
                            <option value="81P" data-code="81P">PE머스타드 (81P)</option>
                            
                            <option value="87P" data-code="87P">PE브라운 (87P)</option>
                            
                            <option value="82E" data-code="82E">PE블루 (82E)</option>
                            
                            <option value="84E" data-code="84E">PE옐로우 (84E)</option>
                            
                            <option value="84T" data-code="84T">PE트레칸트 (84T)</option>
                            
                            <option value="81I" data-code="81I">대아이보리 (81I)</option>
                            
                            <option value="83I" data-code="83I">소아이보리 (83I)</option>
                            
                            <option value="82I" data-code="82I">중아이보리 (82I)</option>
                            
                            <option value="AM" data-code="AM">PE민트 (AM)</option>
                            
                            <option value="BE1" data-code="BE1">애쉬 베이지 (BE1)</option>
                            
                            <option value="BEO" data-code="BEO">O베이지 (BEO)</option>
                            
                            <option value="BES" data-code="BES">S베이지 (BES)</option>
                            
                            <option value="BGN" data-code="BGN">G네이비 (BGN)</option>
                            
                            <option value="MTB" data-code="MTB">B멀티 (MTB)</option>
                            
                            <option value="LGB" data-code="LGB">B로브베이지 (LGB)</option>
                            
                            <option value="LBB" data-code="LBB">B로브블루 (LBB)</option>
                            
                            <option value="MNB" data-code="MNB">B모네 (MNB)</option>
                            
                            <option value="BBL" data-code="BBL">B블루 (BBL)</option>
                            
                            <option value="SCB" data-code="SCB">B스콜 (SCB)</option>
                            
                            <option value="EKB" data-code="EKB">B이크 (EKB)</option>
                            
                            <option value="LVC" data-code="LVC">C로브 (LVC)</option>
                            
                            <option value="MNC" data-code="MNC">C모네 (MNC)</option>
                            
                            <option value="WBC" data-code="WBC">C이크 (WBC)</option>
                            
                            <option value="BK2" data-code="BK2">G그레이 (BK2)</option>
                            
                            <option value="XGG" data-code="XGG">G그린 (XGG)</option>
                            
                            <option value="RDG" data-code="RDG">G레드 (RDG)</option>
                            
                            <option value="JPG" data-code="JPG">G민트 (JPG)</option>
                            
                            <option value="GRG" data-code="GRG">G베이지 (GRG)</option>
                            
                            <option value="GNG" data-code="GNG">G브라운 (GNG)</option>
                            
                            <option value="BKG" data-code="BKG">G블랙 (BKG)</option>
                            
                            <option value="BLG" data-code="BLG">G블루 (BLG)</option>
                            
                            <option value="YEG" data-code="YEG">G옐로우 (YEG)</option>
                            
                            <option value="ORG" data-code="ORG">G오렌지 (ORG)</option>
                            
                            <option value="KKG" data-code="KKG">G카키 (KKG)</option>
                            
                            <option value="LGS" data-code="LGS">럭스 그리스 (LGS)</option>
                            
                            <option value="MGG" data-code="MGG">G핑크 (MGG)</option>
                            
                            <option value="CSG" data-code="CSG">G화이트 (CSG)</option>
                            
                            <option value="CHM" data-code="CHM">M그레이 (CHM)</option>
                            
                            <option value="MEM" data-code="MEM">M레드 (MEM)</option>
                            
                            <option value="MSM" data-code="MSM">M머스터드 (MSM)</option>
                            
                            <option value="KKB" data-code="KKB">M베이지 (KKB)</option>
                            
                            <option value="BRM" data-code="BRM">M브라운 (BRM)</option>
                            
                            <option value="BKM" data-code="BKM">M블랙 (BKM)</option>
                            
                            <option value="GRM" data-code="GRM">M블루 (GRM)</option>
                            
                            <option value="ORM" data-code="ORM">M오렌지 (ORM)</option>
                            
                            <option value="KKM" data-code="KKM">M카키 (KKM)</option>
                            
                            <option value="GYO" data-code="GYO">O그레이 (GYO)</option>
                            
                            <option value="GNO" data-code="GNO">O그린 (GNO)</option>
                            
                            <option value="PLN" data-code="PLN">O네이비 (PLN)</option>
                            
                            <option value="PPO" data-code="PPO">O레드 (PPO)</option>
                            
                            <option value="UJO" data-code="UJO">O멀티 (UJO)</option>
                            
                            <option value="ERO" data-code="ERO">O민트 (ERO)</option>
                            
                            <option value="BRO" data-code="BRO">O브라운 (BRO)</option>
                            
                            <option value="EBO" data-code="EBO">O블랙 (EBO)</option>
                            
                            <option value="BLO" data-code="BLO">O블루 (BLO)</option>
                            
                            <option value="PLO" data-code="PLO">O퍼플 (PLO)</option>
                            
                            <option value="OPK" data-code="OPK">O핑크 (OPK)</option>
                            
                            <option value="WWO" data-code="WWO">O화이트 (WWO)</option>
                            
                            <option value="KBP" data-code="KBP">PE카키 (KBP)</option>
                            
                            <option value="XXS" data-code="XXS">스페이스 그레이 (XXS)</option>
                            
                            <option value="NVS" data-code="NVS">S네이비 (NVS)</option>
                            
                            <option value="SBS" data-code="SBS">S브라운 (SBS)</option>
                            
                            <option value="BKS" data-code="BKS">S블랙 (BKS)</option>
                            
                            <option value="XXW" data-code="XXW">S화이트 (XXW)</option>
                            
                            <option value="BKE" data-code="BKE">포기그레이 (BKE)</option>
                            
                            <option value="JDG" data-code="JDG">올리브 그린 (JDG)</option>
                            
                            <option value="X4Z" data-code="X4Z">기타 (X4Z)</option>
                            
                            <option value="ZZN" data-code="ZZN">미드 네이비 (ZZN)</option>
                            
                            <option value="WIR" data-code="WIR">레드 (WIR)</option>
                            
                            <option value="OWM" data-code="OWM">멀티 (OWM)</option>
                            
                            <option value="BRN" data-code="BRN">코코아브라운 (BRN)</option>
                            
                            <option value="BKB" data-code="BKB">캐비어 블랙 (BKB)</option>
                            
                            <option value="DNB" data-code="DNB">윈드 블루 (DNB)</option>
                            
                            <option value="ORO" data-code="ORO">오렌지 (ORO)</option>
                            
                            <option value="PLP" data-code="PLP">퍼플 (PLP)</option>
                            
                            <option value="PKP" data-code="PKP">핑크 (PKP)</option>
                            
                            <option value="WTW" data-code="WTW">화이트 (WTW)</option>
                            
                            <option value="JET" data-code="JET">제트 (JET)</option>
                            
                            <option value="CDR" data-code="CDR">시더 (CDR)</option>
                            
                            <option value="DBR" data-code="DBR">다크 베리 (DBR)</option>
                            
                            <option value="RCB" data-code="RCB">리치 브라운 (RCB)</option>
                            
                            <option value="A22" data-code="A22">모던 그레이 (A22)</option>
                            
                            <option value="A23" data-code="A23">스틸 그레이 (A23)</option>
                            
                            <option value="A24" data-code="A24">딥 그레이 (A24)</option>
                            
                            <option value="A25" data-code="A25">페일 그레이 (A25)</option>
                            
                            <option value="A17" data-code="A17">브라이트 그레이 (A17)</option>
                            
                            <option value="A16" data-code="A16">다크 그레이 (A16)</option>
                            
                            <option value="A20" data-code="A20">페티드시티 (A20)</option>
                            
                            <option value="A21" data-code="A21">도츠 (A21)</option>
                            
                            <option value="CAV" data-code="CAV">카본 (CAV)</option>
                            
                            <option value="SLT" data-code="SLT">슬레이트 (SLT)</option>
                            
                            <option value="A26" data-code="A26">엠버 (A26)</option>
                            
                            <option value="CVR" data-code="CVR">캐비어 블랙 (CVR)</option>
                            
                            <option value="NNT" data-code="NNT">나이트 (NNT)</option>
                            
                            <option value="DPW" data-code="DPW">다크퓨터 (DPW)</option>
                            
                            <option value="CRB" data-code="CRB">크랜베리 (CRB)</option>
                            
                            <option value="COL" data-code="COL">코랄 (COL)</option>
                            
                            <option value="RBK" data-code="RBK">로얄블랙 (RBK)</option>
                            
                            <option value="SDW" data-code="SDW">럭스 쉐도우 (SDW)</option>
                            
                            <option value="RWR" data-code="RWR">느와르 (RWR)</option>
                            
                            <option value="NRZ" data-code="NRZ">럭스 루즈 (NRZ)</option>
                            
                            <option value="MTL" data-code="MTL">마틸레 (MTL)</option>
                            
                            <option value="GRS" data-code="GRS">그리스 (GRS)</option>
                            
                            <option value="GRR" data-code="GRR">그로세일레 (GRR)</option>
                            
                            <option value="GTA" data-code="GTA">기타 (GTA)</option>
                            
                            <option value="RPS" data-code="RPS">프로스트 (RPS)</option>
                            
                            <option value="ASP" data-code="ASP">아스펜 (ASP)</option>
                            
                            <option value="A15" data-code="A15">캐비어 (A15)</option>
                            
                            <option value="SL0" data-code="SL0">미드나잇 그레이 (SL0)</option>
                            
                            <option value="PG0" data-code="PG0">매트 블랙 (PG0)</option>
                            
                            <option value="ABC" data-code="ABC">알파벳 (ABC)</option>
                            
                            <option value="MSB" data-code="MSB">미스티 그레이 (MSB)</option>
                            
                            <option value="SDB" data-code="SDB">샌디 브라운 (SDB)</option>
                            
                            <option value="DSB" data-code="DSB">더스크 블루 (DSB)</option>
                            
                            <option value="CLM" data-code="CLM">클라우드 민트 (CLM)</option>
                            
                            <option value="CNG" data-code="CNG">캐슈넛 그레이 (CNG)</option>
                            
                            <option value="CLB" data-code="CLB">클라우드 블루 (CLB)</option>
                            
                            <option value="SKB" data-code="SKB">시크 블랙 (SKB)</option>
                            
                            <option value="NTG" data-code="NTG">내추럴 그레이 (NTG)</option>
                            
                            <option value="CEF" data-code="CEF">커피 (CEF)</option>
                            
                            <option value="GRC" data-code="GRC">그레이 (GRC)</option>
                            
                            <option value="STN" data-code="STN">스톤 (STN)</option>
                            
                            <option value="SGR" data-code="SGR">실버 그레이 (SGR)</option>
                            
                            <option value="MSP" data-code="MSP">미스틱 퍼플 (MSP)</option>
                            
                            <option value="CCB" data-code="CCB">차콜 블랙 (CCB)</option>
                            
                            <option value="EVN" data-code="EVN">EBONY (EVN)</option>
                            
                            <option value="RVB" data-code="RVB">레이번 블랙 (RVB)</option>
                            
                            <option value="ALG" data-code="ALG">앨로이 그레이 (ALG)</option>
                            
                            <option value="STB" data-code="STB">스톤 블루 (STB)</option>
                            
                            <option value="RDS" data-code="RDS">봉쥬르 레드 (RDS)</option>
                            
                            <option value="BLS" data-code="BLS">봉쥬르 블루 (BLS)</option>
                            
                            <option value="SFR" data-code="SFR">사파리 (SFR)</option>
                            
                            <option value="A13" data-code="A13">M핑크 (A13)</option>
                            
                            <option value="GRF" data-code="GRF">그라파이트 (GRF)</option>
                            
                            <option value="LAK" data-code="LAK">레이크 (LAK)</option>
                            
                            <option value="BCI" data-code="BCI">버치 (BCI)</option>
                            
                            <option value="CHL" data-code="CHL">체리 (CHL)</option>
                            
                            <option value="COR" data-code="COR">코알 (COR)</option>
                            
                            <option value="A18" data-code="A18">네이비블레이저 (A18)</option>
                            
                            <option value="FSF" data-code="FSF">플라워스포에버 (FSF)</option>
                            
                            <option value="LIL" data-code="LIL">라일락 (LIL)</option>
                            
                            <option value="DSE" data-code="DSE">딥시 (DSE)</option>
                            
                            <option value="OXF" data-code="OXF">옥스포드 (OXF)</option>
                            
                            <option value="NPL" data-code="NPL">플럼 (NPL)</option>
                            
                            <option value="CSU" data-code="CSU">캐슈 (CSU)</option>
                            
                            <option value="CGR" data-code="CGR">크리스탈 그레이 (CGR)</option>
                            
                            <option value="FRB" data-code="FRB">프렌치 블루 (FRB)</option>
                            
                            <option value="LSB" data-code="LSB">럭스 블루 (LSB)</option>
                            
                            <option value="LSR" data-code="LSR">럭스 루즈 (LSR)</option>
                            
                            <option value="DRG" data-code="DRG">다람쥐 (DRG)</option>
                            
                            <option value="FOX" data-code="FOX">여우 (FOX)</option>
                            
                            <option value="FLW" data-code="FLW">꽃 (FLW)</option>
                            
                            <option value="RGR" data-code="RGR">리치 그레이 (RGR)</option>
                            
                            <option value="AQA" data-code="AQA">아쿠아 (AQA)</option>
                            
                            <option value="LAM" data-code="LAM">라임 (LAM)</option>
                            
                            <option value="ANP" data-code="ANP">아울&amp;폭스 (ANP)</option>
                            
                            <option value="HNR" data-code="HNR">헤지호그&amp;라쿤 (HNR)</option>
                            
                            <option value="PIC" data-code="PIC">피크 (PIC)</option>
                            
                            <option value="DGR" data-code="DGR">도트 그레이 (DGR)</option>
                            
                            <option value="GRB" data-code="GRB">그레이시 블루 (GRB)</option>
                            
                            <option value="MKB" data-code="MKB">밀크 베이지 (MKB)</option>
                            
                            <option value="MBK" data-code="MBK">미스틱블랙 (MBK)</option>
                            
                            <option value="ABG" data-code="ABG">어반그레이 (ABG)</option>
                            
                            <option value="SNB" data-code="SNB">샌디 블루 (SNB)</option>
                            
                            <option value="CAC" data-code="CAC">차콜 (CAC)</option>
                            
                            <option value="GFN" data-code="GFN">그레이 플라넬 (GFN)</option>
                            
                            <option value="MNV" data-code="MNV">마린 네이비 (MNV)</option>
                            
                            <option value="STG" data-code="STG">스톤 그레이 (STG)</option>
                            
                            <option value="SHG" data-code="SHG">샤이니그레이 (SHG)</option>
                            
                            <option value="XXB" data-code="XXB">스페이스블랙 (XXB)</option>
                            
                            <option value="PVC" data-code="PVC">투명 PVC (PVC)</option>
                            
                            <option value="TRD" data-code="TRD">트레디드 (TRD)</option>
                            
                            <option value="CBG" data-code="CBG">크림 베이지 (CBG)</option>
                            
                            <option value="CBL" data-code="CBL">시크 블루 (CBL)</option>
                            
                            <option value="CGY" data-code="CGY">시크 그레이 (CGY)</option>
                            
                            <option value="DBK" data-code="DBK">더블블랙 (DBK)</option>
                            
                            <option value="JBK" data-code="JBK">잭블랙 (JBK)</option>
                            
                            <option value="MGY" data-code="MGY">멜란그레이 (MGY)</option>
                            
                            <option value="SBG" data-code="SBG">소프트베이지 (SBG)</option>
                            
                            <option value="CST" data-code="CST">체스트넛 (CST)</option>
                            
                            <option value="WBL" data-code="WBL">위드블루 (WBL)</option>
                            
                            <option value="WCB" data-code="WCB">위드카본 (WCB)</option>
                            
                            <option value="DOV" data-code="DOV">도브 (DOV)</option>
                            
                            <option value="GLD" data-code="GLD">골드 (GLD)</option>
                            
                            <option value="FRN" data-code="FRN">펀 (FRN)</option>
                            
                            <option value="EBG" data-code="EBG">샌드 베이지 (EBG)</option>
                            
                            <option value="GNT" data-code="GNT">그라나이트 (GNT)</option>
                            
                            <option value="PBD" data-code="PBD">핑크버드 (PBD)</option>
                            
                            <option value="FRT" data-code="FRT">포레스트 (FRT)</option>
                            
                            <option value="SET" data-code="SET">세트 (SET)</option>
                            
                            <option value="DNV" data-code="DNV">다크네이비 (DNV)</option>
                            
                            <option value="DRD" data-code="DRD">달리아 레드 (DRD)</option>
                            
                            <option value="VBL" data-code="VBL">빅토리아 블루 (VBL)</option>
                            
                            <option value="SLV" data-code="SLV">실버 (SLV)</option>
                            
                            <option value="MBG" data-code="MBG">멜란 베이지 (MBG)</option>
                            
                            <option value="LNV" data-code="LNV">멜란 네이비 (LNV)</option>
                            
                            <option value="CIV" data-code="CIV">크림아이보리 (CIV)</option>
                            
                            <option value="BE1" data-code="BE1">클래식 베이지 (BE1)</option>
                            
                            <option value="CHP" data-code="CHP">샴페인 (CHP)</option>
                            
                            <option value="OGR" data-code="OGR">오팔 그레이 (OGR)</option>
                            
                            <option value="LBL" data-code="LBL">클래식 블루 (LBL)</option>
                            
                            <option value="SBL" data-code="SBL">스카이 블루 (SBL)</option>
                            
                            <option value="A19" data-code="A19">멜롯 (A19)</option>
                            
                            <option value="STN" data-code="STN">스테리 나이트 (STN)</option>
                            
                            <option value="AMD" data-code="AMD">알몬드 (AMD)</option>
                            
                            <option value="LOG" data-code="LOG">로건 (LOG)</option>
                            
                            <option value="PAF" data-code="PAF">파스텔 포레스트 (PAF)</option>
                            
                            <option value="OXF" data-code="OXF">옥스포드 (OXF)</option>
                            
                            <option value="TMB" data-code="TMB">팀버 (TMB)</option>
                            
                            <option value="LMN" data-code="LMN">레몬 (LMN)</option>
                            
                            <option value="OST" data-code="OST">오이스터 (OST)</option>
                            
                            <option value="QTZ" data-code="QTZ">쿼츠 (QTZ)</option>
                            
                            <option value="BCT" data-code="BCT">비스코티 (BCT)</option>
                            
                            <option value="PSV" data-code="PSV">펄 실버 (PSV)</option>
                            
                            <option value="OPW" data-code="OPW">퓨터 (OPW)</option>
                            
                            <option value="PIN" data-code="PIN">파인 (PIN)</option>
                            
                            <option value="MSS" data-code="MSS">모스 (MSS)</option>
                            
                            <option value="BRD" data-code="BRD">브릭 레드 (BRD)</option>
                            
                            <option value="THM" data-code="THM">타임 (THM)</option>
                            
                            <option value="PCN" data-code="PCN">포르치니 (PCN)</option>
                            
                            <option value="FNV" data-code="FNV">프렌치 네이비 (FNV)</option>
                            
                            <option value="A11" data-code="A11">아고라 스톰 (A11)</option>
                            
                            <option value="A12" data-code="A12">페이브먼트 (A12)</option>
                            
                            <option value="A14" data-code="A14">신더 (A14)</option>
                            
                            <option value="PCF" data-code="PCF">퍼시픽 (PCF)</option>
                            
                            <option value="BRS" data-code="BRS">브라운 스트립 (BRS)</option>
                            
                            <option value="ECL" data-code="ECL">이클립스 (ECL)</option>
                            
                            <option value="RBW" data-code="RBW">레인보우 (RBW)</option>
                            
                            <option value="DFW" data-code="DFW">드리프트우드 (DFW)</option>
                            
                            <option value="SPC" data-code="SPC">스파이스 (SPC)</option>
                            
                            <option value="ECR" data-code="ECR">에크루 (ECR)</option>
                            
                            <option value="AVG" data-code="AVG">아보카도 그린 (AVG)</option>
                            
                            <option value="MGY" data-code="MGY">멜란지 그레이 (MGY)</option>
                            
                            <option value="MEL" data-code="MEL">멜론 (MEL)</option>
                            
                            <option value="SAG" data-code="SAG">세이지 그린 (SAG)</option>
                            
                            <option value="ROS" data-code="ROS">로즈 (ROS)</option>
                            
                            <option value="BDL" data-code="BDL">브린들 (BDL)</option>
                            
                            <option value="SAB" data-code="SAB">세이블 (SAB)</option>
                            
                            <option value="OCN" data-code="OCN">오션 (OCN)</option>
                            
                            <option value="CCL" data-code="CCL">초콜릿 (CCL)</option>
                            
                            <option value="CNC" data-code="CNC">코냑 (CNC)</option>
                            
                            <option value="SHL" data-code="SHL">셰일 (SHL)</option>
                            
                            <option value="PBL" data-code="PBL">페블 (PBL)</option>
                            
                            <option value="THN" data-code="THN">썬더 (THN)</option>
                            
                            <option value="NKL" data-code="NKL">니켈 (NKL)</option>
                            
                            <option value="ABS" data-code="ABS">어비스 (ABS)</option>
                            
                            <option value="TWG" data-code="TWG">트위그 (TWG)</option>
                            
                            <option value="WBG" data-code="WBG">웜베이지 (WBG)</option>
                            
                            <option value="WIV" data-code="WIV">웜아이보리 (WIV)</option>
                            
                            <option value="LBG" data-code="LBG">라떼 베이지 (LBG)</option>
                            
                            <option value="OBG" data-code="OBG">오트 베이지 (OBG)</option>
                            
                            <option value="CPK" data-code="CPK">캔디 핑크 (CPK)</option>
                            
                            <option value="CBW" data-code="CBW">시나몬 브라운 (CBW)</option>
                            
                            <option value="CHO" data-code="CHO">샴페인 오트 (CHO)</option>
                            
                            <option value="CBE" data-code="CBE">코지 베이지 (CBE)</option>
                            
                            <option value="CZG" data-code="CZG">코지 그레이 (CZG)</option>
                            
                            <option value="CMT" data-code="CMT">코지 민트 (CMT)</option>
                            
                            <option value="ABE" data-code="ABE">아몬드 베이지 (ABE)</option>
                            
                            <option value="MGR" data-code="MGR">모스 그린 (MGR)</option>
                            
                            <option value="DPK" data-code="DPK">더스티 핑크 (DPK)</option>
                            
                            <option value="OAK" data-code="OAK">오크 (OAK)</option>
                            
                            <option value="TBG" data-code="TBG">토프 베이지 (TBG)</option>
                            
                            <option value="BME" data-code="BME">멜론(블랙 에디션) (BME)</option>
                            
                            <option value="BLK" data-code="BLK">블랙 (BLK)</option>
                            
                            <option value="KAK" data-code="KAK">카키 (KAK)</option>
                            
                            <option value="GLY" data-code="GLY">그레이 (GLY)</option>
                            
                            <option value="FGB" data-code="FGB">포그 브라운 (FGB)</option>
                            
                            <option value="TUP" data-code="TUP">토프 (TUP)</option>
                            
                            <option value="ASG" data-code="ASG">애쉬 그린 (ASG)</option>
                            
                            <option value="MPK" data-code="MPK">미스티 핑크 (MPK)</option>
                            
                            <option value="TGR" data-code="TGR">티 그린 (TGR)</option>
                            
                            <option value="HRI" data-code="HRI">헤리티지 (HRI)</option>
                            
                            <option value="SAN" data-code="SAN">샌더슨 (SAN)</option>
                            
                            <option value="ELM" data-code="ELM">엘레먼트 (ELM)</option>
                            
                            <option value="GRA" data-code="GRA">그래핀 (GRA)</option>
                            
                            <option value="MIC" data-code="MIC">미카 (MIC)</option>
                            
                            <option value="FAW" data-code="FAW">폰 (FAW)</option>
                            
                            <option value="ONX" data-code="ONX">오닉스 (ONX)</option>
                            
                            <option value="MRL" data-code="MRL">멀 (MRL)</option>
                            
                            <option value="MPL" data-code="MPL">메이플 (MPL)</option>
                            
                            <option value="OTM" data-code="OTM">오트밀 (OTM)</option>
                            
                            <option value="TPG" data-code="TPG">토프그레이 (TPG)</option>
                            
                            <option value="DTP" data-code="DTP">딥 토프 (DTP)</option>
                            
                            <option value="DTP" data-code="DTP">딥 토프(사용X) (DTP)</option>
                            
                            <option value="MLG" data-code="MLG">멜로우 골드 (MLG)</option>
                            
                            <option value="STE" data-code="STE">스톤 베이지 (STE)</option>
                            
                            <option value="ONV" data-code="ONV">오션네이비 (ONV)</option>
                            
                            <option value="DIN" data-code="DIN">공룡 (DIN)</option>
                            
                            <option value="DIN" data-code="DIN">공룡(중복코드) (DIN)</option>
                            
                            <option value="SAS" data-code="SAS">샌드스톤 (SAS)</option>
                            
                            <option value="IND" data-code="IND">인디고 (IND)</option>
                            
                            <option value="BIV" data-code="BIV">바닐라 아이보리 (BIV)</option>
                            
                            <option value="SAK" data-code="SAK">사쿠라 (SAK)</option>
                            
                            <option value="SKY" data-code="SKY">스카이 (SKY)</option>
                            
                            <option value="LTT" data-code="LTT">라떼 (LTT)</option>
                            
                            <option value="MUR" data-code="MUR">머쉬룸 (MUR)</option>
                            
                            <option value="FOG" data-code="FOG">포그 (FOG)</option>
                            
                            <option value="GLA" data-code="GLA">그레이셔 (GLA)</option>
                            
                        </select>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="mb-3">
                        <label class="form-label">자사코드</label>
                        <div class="input-group">
                            <input type="text" class="form-control std-product-code" name="std_product_code[]" placeholder="분류화 표준코드" readonly>
                            <button type="button" class="btn btn-primary btn-generate-code">자동생성</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-10"></div>
                <div class="col-md-2">
                    <button type="button" class="btn btn-sm btn-success btn-add-model me-2">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button type="button" class="btn btn-sm btn-danger btn-remove-model">
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
            </div>
        </div>
    `;
    
    container.append(newRow);
}

// 제품모델 행 삭제
function removeProductModelRow(button) {
    const modelItem = $(button).closest('.product-model-item');
    const container = $('#productModelsContainer');
    
    if (container.find('.product-model-item').length <= 1) {
        alert('첫 행은 지울 수 없습니다.');
        return false;
    }
    
    if (confirm('해당 행을 삭제하시겠습니까?')) {
        modelItem.remove();
    }
}

// 상품 저장
function saveProduct() {
    const formData = new FormData();
    const isEdit = document.getElementById('isEditMode').value === 'true';
    
    // 기본 상품 정보
    formData.append('company_id', document.getElementById('company_id').value);
    formData.append('brand_code_seq', document.getElementById('brand_code_seq').value);
    formData.append('prod_group_code_seq', document.getElementById('prod_group_code_seq').value);
    formData.append('prod_type_code_seq', document.getElementById('prod_type_code_seq').value);
    formData.append('product_name', document.getElementById('product_name').value);
    formData.append('year_code_seq', document.getElementById('year_code_seq').value);
    formData.append('price', document.getElementById('price').value);
    formData.append('use_yn', document.getElementById('use_yn').value);
    formData.append('div_type_code_seq', document.getElementById('div_type_code_seq').value);
    formData.append('description', document.getElementById('description').value);

    // 제품모델 정보 수집
    const productModels = [];
    $('.product-model-item').each(function(index) {
        const modelName = $(this).find('.product-model-name').val();
        const productCode = $(this).find('.product-code').val();
        const prodType2 = $(this).find('.prod-type2').val();
        const productColor = $(this).find('.product-color').val();
        const stdProductCode = $(this).find('.std-product-code').val();
        
        if (modelName && productCode && prodType2 && productColor && stdProductCode) {
            productModels.push({
                name: modelName,
                product_code: productCode,
                prod_type2: prodType2,
                color: productColor,
                std_code: stdProductCode
            });
        }
    });

    if (productModels.length === 0) {
        alert('최소 하나의 제품모델을 등록해야 합니다.');
        return;
    }

    formData.append('product_models', JSON.stringify(productModels));

    const url = isEdit ? `/product/api/update/${document.getElementById('productId').value}` : '/product/api/create';
    const method = isEdit ? 'PUT' : 'POST';

    fetch(url, {
        method: method,
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showMessage(data.message, 'success');
            $('#productModal').modal('hide');
            loadProducts();
        } else {
            showMessage(data.message, 'error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showMessage('저장 중 오류가 발생했습니다.', 'error');
    });
}

// 정렬 기능
function sortProducts(column) {
    if (currentSort.column === column) {
        currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
    } else {
        currentSort.column = column;
        currentSort.direction = 'asc';
    }
    
    updateSortIcons();
    loadProducts();
}

// 정렬 아이콘 업데이트
function updateSortIcons() {
    $('.sort-header').removeClass('asc desc');
    $(`.sort-header[data-column="${currentSort.column}"]`).addClass(currentSort.direction);
}

// 상품 목록 로드 (페이징 지원 + 중복 호출 방지)
function loadProducts(page = 1) {
    if (isLoading) return;
    
    isLoading = true;
    showLoading();
    
    // 검색 파라미터 수집
    const searchTerm = document.getElementById('searchInput').value;
    const brandCodeSeq = document.getElementById('brandFilter').value;
    const categoryCodeSeq = document.getElementById('categoryFilter').value;
    const typeCodeSeq = document.getElementById('typeFilter').value;
    const showInactive = document.getElementById('showInactive').checked;
    
    // API 요청 URL 구성
    const params = new URLSearchParams({
        page: page,
        per_page: perPage,
        sort_by: currentSort.column,        // 정렬 컬럼 추가
        sort_direction: currentSort.direction  // 정렬 방향 추가
    });
    
    if (searchTerm) params.append('search', searchTerm);
    if (brandCodeSeq) params.append('brand_code_seq', brandCodeSeq);
    if (categoryCodeSeq) params.append('category_code_seq', categoryCodeSeq);
    if (typeCodeSeq) params.append('type_code_seq', typeCodeSeq);
    if (showInactive) params.append('show_inactive', 'true');
    
    fetch(`/product/api/list?${params.toString()}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                products = data.products || [];
                
                // 페이징 정보 업데이트
                if (data.pagination) {
                    currentPage = data.pagination.page;
                    perPage = data.pagination.per_page;
                    totalProducts = data.pagination.total;
                    totalPages = data.pagination.pages;
                }
                
                renderProducts();
                renderPagination();
                updatePageInfo();
                updateSortIcons();  // 정렬 아이콘 업데이트 추가
            } else {
                console.error('API 오류:', data.message);
                showAlert('상품 목록을 불러오는데 실패했습니다: ' + data.message, 'error');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            showAlert('서버 오류가 발생했습니다', 'error');
        })
        .finally(() => {
            isLoading = false;
            hideLoading();
        });
}

// 상품 렌더링
function renderProducts() {
    const viewMode = document.querySelector('input[name="viewMode"]:checked').id;
    
    if (viewMode === 'gridView') {
        renderTableView();
    } else {
        renderCardView();
    }
}

// 테이블 뷰 렌더링
function renderTableView() {
    const tbody = document.getElementById('productTableBody');
    tbody.innerHTML = '';
    
    if (filteredProducts.length === 0) {
        tbody.innerHTML = `
            <tr>
                <td colspan="11" class="text-center py-4">
                    <i class="fas fa-inbox fa-2x text-muted mb-2"></i>
                    <p class="text-muted mb-0">등록된 상품이 없습니다</p>
                </td>
            </tr>
        `;
        return;
    }
    
    filteredProducts.forEach((product, index) => {
        const row = `
            <tr onclick="showProductDetail(${product.id})" style="cursor: pointer;">
                <td>${index + 1}</td>
                <td>
                    <span class="badge company-badge-${product.company_id}">
                        ${product.company_id === 1 ? '에이원' : '에이원월드'}
                    </span>
                </td>
                <td>${product.brand_name || '미지정'}</td>
                <td>
                    <strong>${product.product_name}</strong>
                    ${product.product_code ? `<br><small class="text-muted">${product.product_code}</small>` : ''}
                </td>
                <td>${product.category_name || '-'}</td>
                <td>${product.type_name || '-'}</td>
                <td>${product.year_code_name || '-'}</td>
                <td class="price-display">
                    ${product.price ? formatPrice(product.price) + '원' : '-'}
                </td>
                <td>
                    <span class="product-status-${product.is_active ? 'active' : 'inactive'}">
                        ${product.is_active ? '활성' : '비활성'}
                    </span>
                </td>
                <td>${formatDate(product.created_at)}</td>
                <td>
                    <div class="btn-group btn-group-sm">
                        <button class="btn btn-outline-primary btn-sm" onclick="event.stopPropagation(); editProduct(${product.id})" title="수정">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-outline-danger btn-sm" onclick="event.stopPropagation(); deleteProduct(${product.id})" title="삭제">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
        `;
        tbody.innerHTML += row;
    });
}

// 카드 뷰 렌더링
function renderCardView() {
    const container = document.getElementById('productCards');
    container.innerHTML = '';
    
    if (filteredProducts.length === 0) {
        container.innerHTML = `
            <div class="col-12 text-center py-5">
                <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
                <h5 class="text-muted">등록된 상품이 없습니다</h5>
            </div>
        `;
        return;
    }
    
    filteredProducts.forEach(product => {
        const card = `
            <div class="col-md-4 col-lg-3 mb-4">
                <div class="card h-100 shadow-sm" onclick="showProductDetail(${product.id})" style="cursor: pointer;">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span class="badge company-badge-${product.company_id}">
                            ${product.company_id === 1 ? '에이원' : '에이원월드'}
                        </span>
                        <span class="product-status-${product.is_active ? 'active' : 'inactive'}">
                            ${product.is_active ? '활성' : '비활성'}
                        </span>
                    </div>
                    <div class="card-body">
                        <h6 class="card-title">${product.product_name}</h6>
                        <p class="card-text">
                            <small class="text-muted">브랜드: ${product.brand_name || '미지정'}</small><br>
                            <small class="text-muted">품목: ${product.category_name || '-'}</small><br>
                            <small class="text-muted">타입: ${product.type_name || '-'}</small><br>
                            <small class="text-muted">년도: ${product.year_code_name || '-'}</small><br>
                            <span class="price-display">
                                ${product.price ? formatPrice(product.price) + '원' : '가격 미정'}
                            </span>
                        </p>
                    </div>
                    <div class="card-footer bg-transparent">
                        <div class="btn-group w-100" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="event.stopPropagation(); editProduct(${product.id})">
                                <i class="fas fa-edit"></i> 수정
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="event.stopPropagation(); deleteProduct(${product.id})">
                                <i class="fas fa-trash"></i> 삭제
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        container.innerHTML += card;
    });
}

// 검색 함수
function searchProducts() {
    const search = document.getElementById('searchInput').value.toLowerCase();
    
    filteredProducts = products.filter(product => {
        return Object.values(product).some(value => {
            if (value === null || value === undefined) return false;
            return value.toString().toLowerCase().includes(search);
        });
    });
    
    applyFilters();
}

// 필터 적용
function filterProducts() {
    const companyFilter = document.getElementById('companyFilter').value;
    const brandFilter = document.getElementById('brandFilter').value;
    const categoryFilter = document.getElementById('categoryFilter').value;
    const statusFilter = document.getElementById('statusFilter').value;
    
    // 확장 필터 (새로 추가)
    const typeFilter = document.getElementById('typeFilter').value;
    const yearFilter = document.getElementById('yearFilter').value;
    const colorFilter = document.getElementById('colorFilter').value;
    const divTypeFilter = document.getElementById('divTypeFilter').value;
    const productCodeFilter = document.getElementById('productCodeFilter').value;
    const stdCodeFilter = document.getElementById('stdCodeFilter').value.toLowerCase();
    
    filteredProducts = products.filter(product => {
        if (companyFilter && product.company_id.toString() !== companyFilter) return false;
        if (brandFilter && product.brand_code_seq && product.brand_code_seq.toString() !== brandFilter) return false;
        if (categoryFilter && product.category_code_seq && product.category_code_seq.toString() !== categoryFilter) return false;
        if (statusFilter && product.is_active.toString() !== statusFilter) return false;
        
        // 확장 필터 검사 (새로 추가)
        if (typeFilter && product.type_code_seq && product.type_code_seq.toString() !== typeFilter) return false;
        if (yearFilter && product.year_code_seq && product.year_code_seq.toString() !== yearFilter) return false;
        if (colorFilter && product.color_code_seq && product.color_code_seq.toString() !== colorFilter) return false;
        if (divTypeFilter && product.div_type_code_seq && product.div_type_code_seq.toString() !== divTypeFilter) return false;
        if (productCodeFilter && product.product_code_seq && product.product_code_seq.toString() !== productCodeFilter) return false;
        if (stdCodeFilter && product.std_product_code && !product.std_product_code.toLowerCase().includes(stdCodeFilter)) return false;
        
        // 검색어도 함께 적용
        const search = document.getElementById('searchInput').value.toLowerCase();
        if (search) {
            return Object.values(product).some(value => {
                if (value === null || value === undefined) return false;
                return value.toString().toLowerCase().includes(search);
            });
        }
        
        return true;
    });
    
    renderProducts();
    updateCounters();
}

// 필터 초기화
function resetFilters() {
    document.getElementById('searchInput').value = '';
    document.getElementById('companyFilter').value = '';
    document.getElementById('brandFilter').value = '';
    document.getElementById('categoryFilter').value = '';
    document.getElementById('statusFilter').value = '';
    
    // 확장 필터 초기화 (새로 추가)
    document.getElementById('typeFilter').value = '';
    document.getElementById('yearFilter').value = '';
    document.getElementById('colorFilter').value = '';
    document.getElementById('divTypeFilter').value = '';
    document.getElementById('productCodeFilter').value = '';
    document.getElementById('stdCodeFilter').value = '';
    
    filteredProducts = [...products];
    renderProducts();
    updateCounters();
}

// 테이블 정렬
function sortTable(columnIndex) {
    const columns = ['id', 'company_id', 'brand_name', 'product_name', 'product_code', 
                    'category_name', 'type_name', 'price', 'is_active', 'created_at'];
    const column = columns[columnIndex];
    
    if (currentSort.column === column) {
        currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
    } else {
        currentSort.column = column;
        currentSort.direction = 'asc';
    }
    
    filteredProducts.sort((a, b) => {
        let aVal = a[column];
        let bVal = b[column];
        
        // null 값 처리
        if (aVal === null || aVal === undefined) aVal = '';
        if (bVal === null || bVal === undefined) bVal = '';
        
        // 숫자형 컬럼 처리
        if (['id', 'company_id', 'price'].includes(column)) {
            aVal = parseFloat(aVal) || 0;
            bVal = parseFloat(bVal) || 0;
        } else {
            aVal = aVal.toString().toLowerCase();
            bVal = bVal.toString().toLowerCase();
        }
        
        if (currentSort.direction === 'asc') {
            return aVal > bVal ? 1 : -1;
        } else {
            return aVal < bVal ? 1 : -1;
        }
    });
    
    renderProducts();
}

// 정렬 (새로 추가)
function sortProducts(column) {
    // 현재 정렬 컬럼과 같으면 방향을 바꾸고, 다르면 오름차순으로 시작
    if (currentSort.column === column) {
        currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
    } else {
        currentSort.column = column;
        currentSort.direction = 'asc';
    }
    
    // 정렬 아이콘 업데이트
    updateSortIcons();
    
    // 현재 페이지를 1로 리셋하고 새로 로드
    currentPage = 1;
    loadProducts(1);
}

// 정렬 아이콘 업데이트 (새로 추가)
function updateSortIcons() {
    // 모든 정렬 아이콘 초기화
    document.querySelectorAll('.sort-icon').forEach(icon => {
        icon.className = 'sort-icon fas fa-sort';
    });
    
    // 현재 정렬 컬럼의 아이콘 업데이트
    const currentIcon = document.querySelector(`[onclick="sortProducts('${currentSort.column}')"] .sort-icon`);
    if (currentIcon) {
        if (currentSort.direction === 'asc') {
            currentIcon.className = 'sort-icon fas fa-sort-up';
        } else {
            currentIcon.className = 'sort-icon fas fa-sort-down';
        }
    }
}

// 상품 등록 모달 열기
function openAddModal() {
    currentProductId = null;
    document.getElementById('productModalLabel').innerHTML = '상품 등록';
    document.getElementById('productForm').reset();
    document.getElementById('productId').value = '';
    document.getElementById('isEditMode').value = 'false';
    
    const modal = new bootstrap.Modal(document.getElementById('productModal'));
    modal.show();
}

// 상품 수정
function editProduct(id) {
    currentProductId = id;
    
    fetch('/product/api/get/' + id)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const product = data.product;
                
                document.getElementById('productModalLabel').innerHTML = '상품 수정';
                
                // 폼 데이터 설정
                document.getElementById('productId').value = product.id;
                document.getElementById('isEditMode').value = 'true';
                document.getElementById('company_id').value = product.company_id;
                document.getElementById('brand_code_seq').value = product.brand_code_seq || '';
                document.getElementById('prod_group_code_seq').value = product.prod_group_code_seq || '';
                document.getElementById('prod_type_code_seq').value = product.prod_type_code_seq || '';
                document.getElementById('product_name').value = product.product_name;
                document.getElementById('year_code_seq').value = product.year_code_seq || '';
                document.getElementById('price').value = product.price || '';
                document.getElementById('use_yn').value = product.is_active ? 'Y' : 'N';
                document.getElementById('div_type_code_seq').value = product.div_type_code_seq || '';
                
                // 제품모델 목록 로드 (새로 추가)
                loadProductModelsForProduct(product.id);
                
                const modal = new bootstrap.Modal(document.getElementById('productModal'));
                modal.show();
            } else {
                showAlert('상품 정보를 불러오는데 실패했습니다', 'error');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            showAlert('서버 오류가 발생했습니다', 'error');
        });
}

// 상품 저장
function saveProduct() {
    const form = document.getElementById('productForm');
    const formData = new FormData(form);
    
    // 파일 추가
    const fileInput = document.getElementById('modal_manual_file');
    if (fileInput.files[0]) {
        formData.append('manual_file', fileInput.files[0]);
    }
    
    const url = currentProductId ? '/product/api/update/' + currentProductId : '/product/api/create';
    const method = 'POST';
    
    fetch(url, {
        method: method,
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showAlert(currentProductId ? '상품이 수정되었습니다' : '상품이 등록되었습니다', 'success');
            bootstrap.Modal.getInstance(document.getElementById('productModal')).hide();
            loadProducts(); // 목록 새로고침
        } else {
            showAlert('저장에 실패했습니다: ' + data.message, 'error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showAlert('서버 오류가 발생했습니다', 'error');
    });
}

// 상품 삭제
function deleteProduct(id) {
    if (!confirm('정말로 이 상품을 삭제하시겠습니까?')) {
        return;
    }
    
    fetch('/product/api/delete/' + id, {
        method: 'DELETE'
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showAlert('상품이 삭제되었습니다', 'success');
            loadProducts(); // 목록 새로고침
        } else {
            showAlert('삭제에 실패했습니다: ' + data.message, 'error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showAlert('서버 오류가 발생했습니다', 'error');
    });
}

// 상품 상세보기
function showProductDetail(id) {
    fetch('/product/api/get/' + id)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const product = data.product;
                
                const detailContent = `
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="fw-bold">기본 정보</h6>
                            <table class="table table-borderless table-sm">
                                <tr><td class="fw-bold">상품명:</td><td>${product.product_name}</td></tr>
                                <tr><td class="fw-bold">상품코드:</td><td>${product.product_code || '-'}</td></tr>
                                <tr><td class="fw-bold">회사:</td><td>${product.company_id === 1 ? '에이원' : '에이원월드'}</td></tr>
                                <tr><td class="fw-bold">브랜드:</td><td>${product.brand_name || '미지정'}</td></tr>
                                <tr><td class="fw-bold">가격:</td><td>${product.price ? formatPrice(product.price) + '원' : '미정'}</td></tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6 class="fw-bold">분류 정보</h6>
                            <table class="table table-borderless table-sm">
                                <tr><td class="fw-bold">품목:</td><td>${product.category_name || '미지정'}</td></tr>
                                <tr><td class="fw-bold">타입:</td><td>${product.type_name || '미지정'}</td></tr>
                                <tr><td class="fw-bold">년도:</td><td>${product.year_code_name || '-'}</td></tr>
                                <tr><td class="fw-bold">상태:</td><td><span class="product-status-${product.is_active ? 'active' : 'inactive'}">${product.is_active ? '활성' : '비활성'}</span></td></tr>
                                <tr><td class="fw-bold">등록일:</td><td>${formatDate(product.created_at)}</td></tr>
                            </table>
                        </div>
                    </div>
                    ${product.description ? `
                        <div class="row mt-3">
                            <div class="col-12">
                                <h6 class="fw-bold">상품 설명</h6>
                                <p class="text-muted">${product.description}</p>
                            </div>
                        </div>
                    ` : ''}
                    ${product.manual_file_path ? `
                        <div class="row mt-3">
                            <div class="col-12">
                                <h6 class="fw-bold">사용설명서</h6>
                                <a href="${product.manual_file_path}" target="_blank" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-file-pdf me-1"></i>PDF 다운로드
                                </a>
                            </div>
                        </div>
                    ` : ''}
                `;
                
                document.getElementById('productDetailContent').innerHTML = detailContent;
                currentProductId = id;
                
                const modal = new bootstrap.Modal(document.getElementById('productDetailModal'));
                modal.show();
            } else {
                showAlert('상품 정보를 불러오는데 실패했습니다', 'error');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            showAlert('서버 오류가 발생했습니다', 'error');
        });
}

// 상세보기에서 수정
function editProductFromDetail() {
    bootstrap.Modal.getInstance(document.getElementById('productDetailModal')).hide();
    setTimeout(() => {
        editProduct(currentProductId);
    }, 300);
}

// 엑셀 업로드 모달 열기
function openExcelUploadModal() {
    const modal = new bootstrap.Modal(document.getElementById('excelUploadModal'));
    modal.show();
}

// 엑셀 업로드
function uploadExcel() {
    const fileInput = document.getElementById('excelFile');
    const file = fileInput.files[0];
    
    if (!file) {
        showAlert('파일을 선택해주세요', 'warning');
        return;
    }
    
    const formData = new FormData();
    formData.append('file', file);
    
    document.getElementById('uploadProgress').style.display = 'block';
    
    fetch('/product/api/upload-excel', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showAlert(`엑셀 업로드가 완료되었습니다. (성공: ${data.success_count}개, 실패: ${data.error_count}개)`, 'success');
            bootstrap.Modal.getInstance(document.getElementById('excelUploadModal')).hide();
            loadProducts(); // 목록 새로고침
        } else {
            showAlert('업로드에 실패했습니다: ' + data.message, 'error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showAlert('서버 오류가 발생했습니다', 'error');
    })
    .finally(() => {
        document.getElementById('uploadProgress').style.display = 'none';
    });
}

// 엑셀 다운로드
function downloadExcel() {
    window.location.href = '/product/api/download-excel';
}

// ERPia 동기화
function syncWithErpia() {
    if (!confirm('ERPia와 동기화하시겠습니까? 시간이 오래 걸릴 수 있습니다.')) {
        return;
    }
    
    showAlert('ERPia 동기화를 시작합니다...', 'info');
    
    fetch('/product/api/sync-erpia', {
        method: 'POST'
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showAlert('ERPia 동기화가 완료되었습니다', 'success');
            loadProducts(); // 목록 새로고침
        } else {
            showAlert('동기화에 실패했습니다: ' + data.message, 'error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showAlert('서버 오류가 발생했습니다', 'error');
    });
}

// 이벤트 핸들러 초기화
function initializeEventHandlers() {
    // 저장 버튼
    document.getElementById('saveProductBtn').addEventListener('click', saveProduct);
    
    // 파일 입력 변경
    document.getElementById('modal_manual_file').addEventListener('change', function(e) {
        const file = e.target.files[0];
        const fileInfo = document.getElementById('fileInfo');
        
        if (file) {
            fileInfo.innerHTML = `
                <div class="alert alert-info">
                    <i class="fas fa-file-pdf me-2"></i>
                    선택된 파일: ${file.name} (${formatFileSize(file.size)})
                </div>
            `;
            fileInfo.style.display = 'block';
        } else {
            fileInfo.style.display = 'none';
        }
    });
}

// 파일 업로드 설정
function setupFileUpload() {
    const uploadArea = document.querySelector('.file-upload-area');
    const fileInput = document.getElementById('modal_manual_file');
    
    // 드래그 앤 드롭
    uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        uploadArea.classList.add('dragover');
    });
    
    uploadArea.addEventListener('dragleave', function(e) {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
    });
    
    uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        
        const files = e.dataTransfer.files;
        if (files.length > 0 && files[0].type === 'application/pdf') {
            fileInput.files = files;
            fileInput.dispatchEvent(new Event('change'));
        } else {
            showAlert('PDF 파일만 업로드 가능합니다', 'warning');
        }
    });
}

// 뷰 모드 토글 설정
function setupViewModeToggle() {
    document.querySelectorAll('input[name="viewMode"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const tableView = document.getElementById('tableView');
            const cardView = document.getElementById('cardView');
            
            if (this.id === 'gridView') {
                tableView.style.display = 'block';
                cardView.style.display = 'none';
            } else {
                tableView.style.display = 'none';
                cardView.style.display = 'flex';
            }
            
            renderProducts();
        });
    });
}

// 유틸리티 함수들
function applyFilters() {
    renderProducts();
    updateCounters();
}

function updateCounters() {
    document.getElementById('productCount').textContent = filteredProducts.length;
    document.getElementById('tableCount').textContent = filteredProducts.length;
}

function showLoading(show) {
    document.getElementById('loadingIndicator').style.display = show ? 'block' : 'none';
}

function formatPrice(price) {
    return new Intl.NumberFormat('ko-KR').format(price);
}

function formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('ko-KR');
}

function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

function showAlert(message, type = 'info') {
    // 부트스트랩 토스트 또는 간단한 alert 사용
    // 여기서는 간단하게 alert 사용
    if (type === 'error') {
        alert('오류: ' + message);
    } else if (type === 'success') {
        alert('성공: ' + message);
    } else if (type === 'warning') {
        alert('경고: ' + message);
    } else {
        alert(message);
    }
}

// 자가코드 자동생성 함수 (새로 추가)
function generateStdCode() {
    // 현재 활성화된 폼이 메인 상품 폼인지 제품모델 폼인지 확인
    const isProductModelForm = event.target.id === 'generateModelStdCodeBtn';
    
    let brandSeq, divTypeSeq, categorySeq, typeSeq, productCodeSeq, yearSeq, colorSeq;
    let stdCodeInputId;
    
    if (isProductModelForm) {
        // 제품모델 폼에서 호출된 경우
        brandSeq = document.getElementById('modal_brand_code_seq').value;
        divTypeSeq = document.getElementById('new_model_div_type').value;
        categorySeq = document.getElementById('modal_category_code_seq').value;
        typeSeq = document.getElementById('new_model_product_code').value;
        productCodeSeq = document.getElementById('modal_product_code_seq').value;
        yearSeq = document.getElementById('modal_year_code_seq').value;
        colorSeq = document.getElementById('new_model_color').value;
        stdCodeInputId = 'new_model_std_code';
    } else {
        // 메인 상품 폼에서 호출된 경우
        brandSeq = document.getElementById('modal_brand_code_seq').value;
        divTypeSeq = document.getElementById('modal_div_type_code_seq').value;
        categorySeq = document.getElementById('modal_category_code_seq').value;
        typeSeq = document.getElementById('modal_type_code_seq').value;
        productCodeSeq = document.getElementById('modal_product_code_seq').value;
        yearSeq = document.getElementById('modal_year_code_seq').value;
        colorSeq = document.getElementById('modal_color_code_seq').value;
        stdCodeInputId = 'modal_std_product_code';
    }
    
    // 필수 필드 검증
    const requiredFields = [
        { value: brandSeq, name: '브랜드' },
        { value: divTypeSeq, name: '구분타입' },
        { value: categorySeq, name: '품목' },
        { value: typeSeq, name: '타입' },
        { value: productCodeSeq, name: '제품코드' },
        { value: yearSeq, name: '년도' },
        { value: colorSeq, name: '색상' }
    ];
    
    for (let field of requiredFields) {
        if (!field.value) {
            showAlert(`${field.name}을(를) 먼저 선택해주세요.`, 'warning');
            return;
        }
    }
    
    // 자가코드 생성 API 호출
    const requestData = {
        brand_code_seq: parseInt(brandSeq),
        div_type_code_seq: parseInt(divTypeSeq),
        category_code_seq: parseInt(categorySeq),
        type_code_seq: parseInt(typeSeq),
        product_code_seq: parseInt(productCodeSeq),
        year_code_seq: parseInt(yearSeq),
        color_code_seq: parseInt(colorSeq)
    };
    
    fetch('/product/api/generate-std-code', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(requestData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // 자가코드 입력 필드에 설정
            document.getElementById(stdCodeInputId).value = data.std_code;
            
            // 구성 정보 표시 (메인 폼에서만)
            if (!isProductModelForm) {
                const breakdown = data.breakdown;
                const breakdownText = `
                    ${breakdown.brand.code}(${breakdown.brand.name}) + 
                    ${breakdown.div_type.code}(${breakdown.div_type.name}) + 
                    ${breakdown.prod_group.code}(${breakdown.prod_group.name}) + 
                    ${breakdown.prod_type.code}(${breakdown.prod_type.name}) + 
                    ${breakdown.prod_code.code}(${breakdown.prod_code.name}) + 
                    ${breakdown.prod_type2.code}(${breakdown.prod_type2.name}) + 
                    ${breakdown.year.code}(${breakdown.year.name}) + 
                    ${breakdown.color.code}(${breakdown.color.name})
                `;
                
                document.getElementById('codeBreakdownText').textContent = breakdownText;
                document.getElementById('stdCodeBreakdown').style.display = 'block';
            }
            
            showAlert(data.message, 'success');
        } else {
            showAlert(data.message, 'error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showAlert('자가코드 생성 중 오류가 발생했습니다.', 'error');
    });
}

// 제품모델 추가 함수 (새로 추가)
function addProductModel() {
    const modelName = document.getElementById('new_model_name').value.trim();
    const colorSelect = document.getElementById('new_model_color');
    const additionalPrice = document.getElementById('new_model_additional_price').value || 0;
    const stock = document.getElementById('new_model_stock').value || 0;
    
    if (!modelName) {
        showAlert('제품모델명을 입력하세요.', 'warning');
        return;
    }
    
    if (!colorSelect.value) {
        showAlert('색상을 선택하세요.', 'warning');
        return;
    }
    
    // 자가코드 생성
    const brandCode = getSelectedCode('modal_brand_code_seq');
    const divTypeCode = getSelectedCode('modal_div_type_code_seq');
    const prodGroupCode = getSelectedCode('modal_prod_group_code_seq');
    const prodTypeCode = getSelectedCode('modal_prod_type_code_seq');
    const productCode = getSelectedCode('modal_product_code_seq');
    const type2Code = getSelectedCode('modal_prod_type2_code_seq');
    const yearCode = getSelectedCode('modal_year_code_seq');
    const colorCode = getSelectedCode('new_model_color');
    
    if (!brandCode || !divTypeCode || !prodGroupCode || !prodTypeCode || 
        !productCode || !type2Code || !yearCode || !colorCode) {
        showAlert('모든 코드를 선택해주세요.', 'warning');
        return;
    }
    
    const stdCode = `${brandCode}${divTypeCode}${prodGroupCode}${prodTypeCode}${productCode}${type2Code}${yearCode}${colorCode}`;
    
    // 제품모델 객체 생성
    const productModel = {
        id: Date.now(), // 임시 ID
        product_name: modelName,
        color_seq: colorSelect.value,
        color_name: colorSelect.options[colorSelect.selectedIndex].text,
        color_code: colorCode,
        additional_price: parseInt(additionalPrice),
        stock_quantity: parseInt(stock),
        std_div_prod_code: stdCode
    };
    
    // 글로벌 배열에 추가 (나중에 서버로 전송)
    if (!window.productModels) {
        window.productModels = [];
    }
    window.productModels.push(productModel);
    
    // UI 업데이트
    renderProductModels();
    
    // 폼 초기화
    document.getElementById('new_model_name').value = '';
    document.getElementById('new_model_color').value = '';
    document.getElementById('new_model_additional_price').value = '0';
    document.getElementById('new_model_stock').value = '0';
    
    // 완성된 코드 미리보기 숨김
    document.getElementById('completeCodePreview').style.display = 'none';
    
    showAlert('제품모델이 추가되었습니다.', 'success');
}

// 제품모델 목록 렌더링 (새로 추가)
function renderProductModels() {
    const container = document.getElementById('productModelsList');
    
    if (!window.productModels || window.productModels.length === 0) {
        container.innerHTML = '<p class="text-muted text-center m-0">등록된 제품모델이 없습니다.</p>';
        return;
    }
    
    let html = '';
    window.productModels.forEach((model, index) => {
        html += `
            <div class="d-flex justify-content-between align-items-center border-bottom py-2">
                <div class="flex-grow-1">
                    <strong>${model.product_name}</strong>
                    <small class="text-muted d-block">
                        색상: ${model.color_name} | 자가코드: <code>${model.std_div_prod_code}</code>
                    </small>
                    <small class="text-muted">
                        추가가격: ${model.additional_price.toLocaleString()}원 | 재고: ${model.stock_quantity}개
                    </small>
                </div>
                <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeProductModel(${index})">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

// 제품모델 제거 (새로 추가)
function removeProductModel(index) {
    if (window.productModels && window.productModels.length > index) {
        window.productModels.splice(index, 1);
        renderProductModels();
        showAlert('제품모델이 제거되었습니다.', 'info');
    }
}

// 페이지 로드 완료 시 이벤트 리스너 등록
document.addEventListener('DOMContentLoaded', function() {
    // 기존 초기화 함수들
    setupViewModeToggle();
    loadProducts(); // 상품 목록만 로드 (제품모델은 별도 탭에서 로드)
    
    // 페이징 이벤트 리스너 추가 (새로 추가)
    const perPageSelect = document.getElementById('perPageSelect');
    if (perPageSelect) {
        perPageSelect.addEventListener('change', changePerPage);
    }
    
    // 자가코드 생성 버튼 이벤트 리스너 (새로 추가)
    const generateBtn = document.getElementById('generateStdCodeBtn');
    if (generateBtn) {
        generateBtn.addEventListener('click', generateStdCode);
    }

    // 제품모델 자가코드 생성 버튼 이벤트 리스너 (새로 추가)
    const generateModelStdCodeBtn = document.getElementById('generateModelStdCodeBtn');
    if (generateModelStdCodeBtn) {
        generateModelStdCodeBtn.addEventListener('click', generateStdCode);
    }
    
    // 연관 셀렉트박스 이벤트 리스너 등록 (새로 추가)
    setupDependentSelects();
});

// 연관 셀렉트박스 설정 (새로 추가)
function setupDependentSelects() {
    // 품목그룹 변경 시 제품타입 필터링
    const prodGroupSelect = document.getElementById('modal_prod_group_code_seq');
    const prodTypeSelect = document.getElementById('modal_prod_type_code_seq');
    
    if (prodGroupSelect && prodTypeSelect) {
        // 제품타입의 전체 옵션을 저장 (초기화용)
        const allProdTypeOptions = Array.from(prodTypeSelect.options).slice(1); // 첫번째 "선택하세요" 제외
        
        prodGroupSelect.addEventListener('change', function() {
            const selectedGroup = this.value;
            
            // 제품타입 초기화
            prodTypeSelect.innerHTML = '<option value="">선택하세요</option>';
            
            if (selectedGroup) {
                // 선택된 품목그룹에 따라 관련 제품타입만 표시
                // 여기서는 단순히 모든 타입을 표시하지만, 실제로는 API에서 필터링된 데이터를 가져와야 함
                allProdTypeOptions.forEach(option => {
                    const newOption = option.cloneNode(true);
                    prodTypeSelect.appendChild(newOption);
                });
            }
        });
    }
    
    // 브랜드 변경 시 구분타입 필터링 (필요시 구현)
    const brandSelect = document.getElementById('modal_brand_code_seq');
    const divTypeSelect = document.getElementById('modal_div_type_code_seq');
    
    if (brandSelect && divTypeSelect) {
        const allDivTypeOptions = Array.from(divTypeSelect.options).slice(1);
        
        brandSelect.addEventListener('change', function() {
            // 필요시 브랜드별 구분타입 필터링 로직 구현
        });
    }
    
    // 코드 변경 시 미리보기 업데이트
    const codeSelects = [
        'modal_brand_code_seq',
        'modal_div_type_code_seq', 
        'modal_prod_group_code_seq',
        'modal_prod_type_code_seq',
        'modal_product_code_seq',
        'modal_prod_type2_code_seq',
        'modal_year_code_seq'
    ];
    
    codeSelects.forEach(selectId => {
        const select = document.getElementById(selectId);
        if (select) {
            select.addEventListener('change', updateCodePreview);
        }
    });
    
    // 색상 변경 시 완성된 코드 미리보기 업데이트
    const colorSelect = document.getElementById('new_model_color');
    if (colorSelect) {
        colorSelect.addEventListener('change', updateCompleteCodePreview);
    }
}

// 코드 미리보기 업데이트 (새로 추가)
function updateCodePreview() {
    const brandCode = getSelectedCode('modal_brand_code_seq') || 'XX';
    const divTypeCode = getSelectedCode('modal_div_type_code_seq') || 'X';
    const prodGroupCode = getSelectedCode('modal_prod_group_code_seq') || 'XX';
    const prodTypeCode = getSelectedCode('modal_prod_type_code_seq') || 'XX';
    const productCode = getSelectedCode('modal_product_code_seq') || 'XX';
    const type2Code = getSelectedCode('modal_prod_type2_code_seq') || 'XX';
    const yearCode = getSelectedCode('modal_year_code_seq') || 'XX';
    
    const preview = `${brandCode}-${divTypeCode}-${prodGroupCode}-${prodTypeCode}-${productCode}-${type2Code}-${yearCode}-???`;
    document.getElementById('codePreview').textContent = preview;
    
    // 완성된 코드 미리보기도 업데이트
    updateCompleteCodePreview();
}

// 완성된 코드 미리보기 업데이트 (새로 추가)
function updateCompleteCodePreview() {
    const brandCode = getSelectedCode('modal_brand_code_seq') || 'XX';
    const divTypeCode = getSelectedCode('modal_div_type_code_seq') || 'X';
    const prodGroupCode = getSelectedCode('modal_prod_group_code_seq') || 'XX';
    const prodTypeCode = getSelectedCode('modal_prod_type_code_seq') || 'XX';
    const productCode = getSelectedCode('modal_product_code_seq') || 'XX';
    const type2Code = getSelectedCode('modal_prod_type2_code_seq') || 'XX';
    const yearCode = getSelectedCode('modal_year_code_seq') || 'XX';
    const colorCode = getSelectedCode('new_model_color') || 'XXX';
    
    if (colorCode !== 'XXX') {
        const completeCode = `${brandCode}${divTypeCode}${prodGroupCode}${prodTypeCode}${productCode}${type2Code}${yearCode}${colorCode}`;
        document.getElementById('completeCode').textContent = completeCode;
        document.getElementById('completeCodePreview').style.display = 'block';
    } else {
        document.getElementById('completeCodePreview').style.display = 'none';
    }
}

// 선택된 옵션의 코드 값 가져오기 (새로 추가)
function getSelectedCode(selectId) {
    const select = document.getElementById(selectId);
    if (!select || !select.value) return null;
    
    const selectedOption = select.options[select.selectedIndex];
    return selectedOption.getAttribute('data-code');
}

// 제품모델 추가 (새로 수정)
function addProductModel() {
    const modelName = document.getElementById('new_model_name').value.trim();
    const colorSelect = document.getElementById('new_model_color');
    const additionalPrice = document.getElementById('new_model_additional_price').value || 0;
    const stock = document.getElementById('new_model_stock').value || 0;
    
    if (!modelName) {
        showAlert('제품모델명을 입력하세요.', 'warning');
        return;
    }
    
    if (!colorSelect.value) {
        showAlert('색상을 선택하세요.', 'warning');
        return;
    }
    
    // 자가코드 생성
    const brandCode = getSelectedCode('modal_brand_code_seq');
    const divTypeCode = getSelectedCode('modal_div_type_code_seq');
    const prodGroupCode = getSelectedCode('modal_prod_group_code_seq');
    const prodTypeCode = getSelectedCode('modal_prod_type_code_seq');
    const productCode = getSelectedCode('modal_product_code_seq');
    const type2Code = getSelectedCode('modal_prod_type2_code_seq');
    const yearCode = getSelectedCode('modal_year_code_seq');
    const colorCode = getSelectedCode('new_model_color');
    
    if (!brandCode || !divTypeCode || !prodGroupCode || !prodTypeCode || 
        !productCode || !type2Code || !yearCode || !colorCode) {
        showAlert('모든 코드를 선택해주세요.', 'warning');
        return;
    }
    
    const stdCode = `${brandCode}${divTypeCode}${prodGroupCode}${prodTypeCode}${productCode}${type2Code}${yearCode}${colorCode}`;
    
    // 제품모델 객체 생성
    const productModel = {
        id: Date.now(), // 임시 ID
        product_name: modelName,
        color_seq: colorSelect.value,
        color_name: colorSelect.options[colorSelect.selectedIndex].text,
        color_code: colorCode,
        additional_price: parseInt(additionalPrice),
        stock_quantity: parseInt(stock),
        std_div_prod_code: stdCode
    };
    
    // 글로벌 배열에 추가 (나중에 서버로 전송)
    if (!window.productModels) {
        window.productModels = [];
    }
    window.productModels.push(productModel);
    
    // UI 업데이트
    renderProductModels();
    
    // 폼 초기화
    document.getElementById('new_model_name').value = '';
    document.getElementById('new_model_color').value = '';
    document.getElementById('new_model_additional_price').value = '0';
    document.getElementById('new_model_stock').value = '0';
    
    // 완성된 코드 미리보기 숨김
    document.getElementById('completeCodePreview').style.display = 'none';
    
    showAlert('제품모델이 추가되었습니다.', 'success');
}

// 제품모델 목록 렌더링 (새로 추가)
function renderProductModels() {
    const container = document.getElementById('productModelsList');
    
    if (!window.productModels || window.productModels.length === 0) {
        container.innerHTML = '<p class="text-muted text-center m-0">등록된 제품모델이 없습니다.</p>';
        return;
    }
    
    let html = '';
    window.productModels.forEach((model, index) => {
        html += `
            <div class="d-flex justify-content-between align-items-center border-bottom py-2">
                <div class="flex-grow-1">
                    <strong>${model.product_name}</strong>
                    <small class="text-muted d-block">
                        색상: ${model.color_name} | 자가코드: <code>${model.std_div_prod_code}</code>
                    </small>
                    <small class="text-muted">
                        추가가격: ${model.additional_price.toLocaleString()}원 | 재고: ${model.stock_quantity}개
                    </small>
                </div>
                <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeProductModel(${index})">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

// 제품모델 제거 (새로 추가)
function removeProductModel(index) {
    if (window.productModels && window.productModels.length > index) {
        window.productModels.splice(index, 1);
        renderProductModels();
        showAlert('제품모델이 제거되었습니다.', 'info');
    }
}

// 페이징 UI 렌더링 (새로 추가)
function renderPagination() {
    const pagination = document.getElementById('pagination');
    pagination.innerHTML = '';
    
    if (totalPages <= 1) return;
    
    // 이전 버튼
    pagination.innerHTML += `
        <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
            <a class="page-link" href="#" onclick="changePage(${currentPage - 1}); return false;">
                <i class="fas fa-chevron-left"></i>
            </a>
        </li>
    `;
    
    // 페이지 번호들
    const startPage = Math.max(1, currentPage - 2);
    const endPage = Math.min(totalPages, currentPage + 2);
    
    if (startPage > 1) {
        pagination.innerHTML += `
            <li class="page-item">
                <a class="page-link" href="#" onclick="changePage(1); return false;">1</a>
            </li>
        `;
        if (startPage > 2) {
            pagination.innerHTML += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
        }
    }
    
    for (let i = startPage; i <= endPage; i++) {
        pagination.innerHTML += `
            <li class="page-item ${i === currentPage ? 'active' : ''}">
                <a class="page-link" href="#" onclick="changePage(${i}); return false;">${i}</a>
            </li>
        `;
    }
    
    if (endPage < totalPages) {
        if (endPage < totalPages - 1) {
            pagination.innerHTML += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
        }
        pagination.innerHTML += `
            <li class="page-item">
                <a class="page-link" href="#" onclick="changePage(${totalPages}); return false;">${totalPages}</a>
            </li>
        `;
    }
    
    // 다음 버튼
    pagination.innerHTML += `
        <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
            <a class="page-link" href="#" onclick="changePage(${currentPage + 1}); return false;">
                <i class="fas fa-chevron-right"></i>
            </a>
        </li>
    `;
}

// 페이지 정보 업데이트 (새로 추가)
function updatePageInfo() {
    document.getElementById('totalProducts').textContent = totalProducts;
    document.getElementById('currentPageNum').textContent = currentPage;
    document.getElementById('totalPages').textContent = totalPages;
}

// 페이지 변경 (새로 추가)
function changePage(page) {
    if (page < 1 || page > totalPages || page === currentPage) return;
    loadProducts(page);
}

// 페이지당 항목 수 변경 (새로 추가)
function changePerPage() {
    perPage = parseInt(document.getElementById('perPageSelect').value);
    currentPage = 1; // 첫 페이지로 리셋
    loadProducts(1);
}
</script>

</body>
</html> 